ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"app_sx126x.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.OnTxDone,"ax",%progbits
  18              		.align	1
  19              		.global	OnTxDone
  20              		.arch armv7e-m
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  24              		.fpu fpv4-sp-d16
  26              	OnTxDone:
  27              	.LFB143:
  28              		.file 1 "Core/Src/app_sx126x.c"
   1:Core/Src/app_sx126x.c **** #include "app_sx126x.h"
   2:Core/Src/app_sx126x.c **** /*
   3:Core/Src/app_sx126x.c ****  / _____)             _              | |
   4:Core/Src/app_sx126x.c **** ( (____  _____ ____ _| |_ _____  ____| |__
   5:Core/Src/app_sx126x.c ****  \____ \| ___ |    (_   _) ___ |/ ___)  _ \
   6:Core/Src/app_sx126x.c ****  _____) ) ____| | | || |_| ____( (___| | | |
   7:Core/Src/app_sx126x.c **** (______/|_____)_|_|_| \__)_____)\____)_| |_|
   8:Core/Src/app_sx126x.c ****     (C)2013 Semtech
   9:Core/Src/app_sx126x.c **** 
  10:Core/Src/app_sx126x.c **** Description: Ping-Pong implementation
  11:Core/Src/app_sx126x.c **** 
  12:Core/Src/app_sx126x.c **** License: Revised BSD License, see LICENSE.TXT file include in the project
  13:Core/Src/app_sx126x.c **** 
  14:Core/Src/app_sx126x.c **** Maintainer: Miguel Luis and Gregory Cristian
  15:Core/Src/app_sx126x.c **** */
  16:Core/Src/app_sx126x.c **** #include <string.h>
  17:Core/Src/app_sx126x.c **** #include <stdio.h>
  18:Core/Src/app_sx126x.c **** #include "board.h"
  19:Core/Src/app_sx126x.c **** #include "radio.h"
  20:Core/Src/app_sx126x.c **** 
  21:Core/Src/app_sx126x.c **** #define USE_MODEM_FSK
  22:Core/Src/app_sx126x.c **** // #define USE_TCXO
  23:Core/Src/app_sx126x.c **** 
  24:Core/Src/app_sx126x.c **** 
  25:Core/Src/app_sx126x.c **** #define RF_FREQUENCY                               855800000// 868000000//490000000 // Hz
  26:Core/Src/app_sx126x.c **** // #define RF_FREQUENCY                               433000000// 868000000//490000000 // Hz
  27:Core/Src/app_sx126x.c **** // #define RF_FREQUENCY                               868000000// 868000000//490000000 // Hz
  28:Core/Src/app_sx126x.c **** 
  29:Core/Src/app_sx126x.c **** #define TX_OUTPUT_POWER                             14//22        // dBm
  30:Core/Src/app_sx126x.c **** 
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 2


  31:Core/Src/app_sx126x.c **** #if defined( USE_MODEM_LORA )
  32:Core/Src/app_sx126x.c **** 
  33:Core/Src/app_sx126x.c **** #define LORA_BANDWIDTH                              0         // [0: 125 kHz,
  34:Core/Src/app_sx126x.c ****                                                               //  1: 250 kHz,
  35:Core/Src/app_sx126x.c ****                                                               //  2: 500 kHz,
  36:Core/Src/app_sx126x.c ****                                                               //  3: Reserved]
  37:Core/Src/app_sx126x.c **** #define LORA_SPREADING_FACTOR                       10        // [SF7..SF12]
  38:Core/Src/app_sx126x.c **** #define LORA_CODINGRATE                             1         // [1: 4/5,
  39:Core/Src/app_sx126x.c ****                                                               //  2: 4/6,
  40:Core/Src/app_sx126x.c ****                                                               //  3: 4/7,
  41:Core/Src/app_sx126x.c ****                                                               //  4: 4/8]
  42:Core/Src/app_sx126x.c **** #define LORA_PREAMBLE_LENGTH                        8         // Same for Tx and Rx
  43:Core/Src/app_sx126x.c **** #define LORA_SYMBOL_TIMEOUT                         0         // Symbols
  44:Core/Src/app_sx126x.c **** #define LORA_FIX_LENGTH_PAYLOAD_ON                  false
  45:Core/Src/app_sx126x.c **** #define LORA_IQ_INVERSION_ON                        false
  46:Core/Src/app_sx126x.c **** 
  47:Core/Src/app_sx126x.c **** #elif defined( USE_MODEM_FSK )
  48:Core/Src/app_sx126x.c **** 
  49:Core/Src/app_sx126x.c **** 
  50:Core/Src/app_sx126x.c **** #define FSK_FDEV                                    20000      // Hz 
  51:Core/Src/app_sx126x.c **** #define FSK_DATARATE                                2400      // bps
  52:Core/Src/app_sx126x.c **** // #define FSK_FDEV                                    5000      // Hz 
  53:Core/Src/app_sx126x.c **** // #define FSK_DATARATE                                20000      // bps
  54:Core/Src/app_sx126x.c **** #define FSK_BANDWIDTH                               50000     // Hz >> DSB in sx126x
  55:Core/Src/app_sx126x.c **** #define FSK_AFC_BANDWIDTH                           83333     // Hz
  56:Core/Src/app_sx126x.c **** #define FSK_PREAMBLE_LENGTH                         2          // 16 bits Same for Tx and Rx
  57:Core/Src/app_sx126x.c **** #define FSK_FIX_LENGTH_PAYLOAD_ON                   true
  58:Core/Src/app_sx126x.c **** #define FSK_FIX_PAYLOAD_LEN													10
  59:Core/Src/app_sx126x.c **** #define FSK_SYNCWORD_LEN														2          // 3 bytes 
  60:Core/Src/app_sx126x.c **** #define FSK_CRC_ON																	false
  61:Core/Src/app_sx126x.c **** 
  62:Core/Src/app_sx126x.c **** // #define FSK_FDEV                                    5000      // Hz 
  63:Core/Src/app_sx126x.c **** // #define FSK_DATARATE                                20000      // bps
  64:Core/Src/app_sx126x.c **** // #define FSK_BANDWIDTH                               50000     // Hz >> DSB in sx126x
  65:Core/Src/app_sx126x.c **** // #define FSK_AFC_BANDWIDTH                           83333     // Hz
  66:Core/Src/app_sx126x.c **** // #define FSK_PREAMBLE_LENGTH                         8          // 16 bits Same for Tx and Rx
  67:Core/Src/app_sx126x.c **** // #define FSK_FIX_LENGTH_PAYLOAD_ON                   false
  68:Core/Src/app_sx126x.c **** // #define FSK_FIX_PAYLOAD_LEN													20
  69:Core/Src/app_sx126x.c **** // #define FSK_SYNCWORD_LEN														2          // 3 bytes 
  70:Core/Src/app_sx126x.c **** // #define FSK_CRC_ON																	false
  71:Core/Src/app_sx126x.c **** 
  72:Core/Src/app_sx126x.c **** 
  73:Core/Src/app_sx126x.c **** #else
  74:Core/Src/app_sx126x.c ****     #error "Please define a modem in the compiler options."
  75:Core/Src/app_sx126x.c **** #endif
  76:Core/Src/app_sx126x.c **** 
  77:Core/Src/app_sx126x.c **** typedef enum
  78:Core/Src/app_sx126x.c **** {
  79:Core/Src/app_sx126x.c ****     LOWPOWER,
  80:Core/Src/app_sx126x.c ****     RX,
  81:Core/Src/app_sx126x.c ****     RX_TIMEOUT,
  82:Core/Src/app_sx126x.c ****     RX_ERROR,
  83:Core/Src/app_sx126x.c ****     TX,
  84:Core/Src/app_sx126x.c ****     TX_TIMEOUT,
  85:Core/Src/app_sx126x.c **** }States_t;
  86:Core/Src/app_sx126x.c **** 
  87:Core/Src/app_sx126x.c **** typedef enum
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 3


  88:Core/Src/app_sx126x.c **** {
  89:Core/Src/app_sx126x.c **** 	FSK_TEST_INIT,
  90:Core/Src/app_sx126x.c **** 	FSK_TEST_START,
  91:Core/Src/app_sx126x.c **** 	FSK_TSET_INPROCESS,
  92:Core/Src/app_sx126x.c **** 	FSK_TEST_DONE
  93:Core/Src/app_sx126x.c **** }Fsk_test_state_t;
  94:Core/Src/app_sx126x.c **** 
  95:Core/Src/app_sx126x.c **** #define RX_TIMEOUT_VALUE                            1000
  96:Core/Src/app_sx126x.c **** #define BUFFER_SIZE                                 64 // Define the payload size here
  97:Core/Src/app_sx126x.c **** 
  98:Core/Src/app_sx126x.c **** const uint8_t PingMsg[] = "PING";
  99:Core/Src/app_sx126x.c **** const uint8_t PongMsg[] = "PONG";
 100:Core/Src/app_sx126x.c **** 
 101:Core/Src/app_sx126x.c **** uint16_t BufferSize = BUFFER_SIZE;
 102:Core/Src/app_sx126x.c **** uint8_t Buffer[BUFFER_SIZE];
 103:Core/Src/app_sx126x.c **** 
 104:Core/Src/app_sx126x.c **** uint8_t xorbuf[]={0xff,0xe1 ,0x1d ,0x9a ,0xed ,0x85 ,0x33 ,0x24 ,0xea ,0x7a ,0xd2 ,0x39 ,0x70 ,0x97
 105:Core/Src/app_sx126x.c **** States_t State = LOWPOWER;
 106:Core/Src/app_sx126x.c **** 
 107:Core/Src/app_sx126x.c **** int8_t RssiValue = 0;
 108:Core/Src/app_sx126x.c **** int8_t SnrValue = 0;
 109:Core/Src/app_sx126x.c **** 
 110:Core/Src/app_sx126x.c **** TimerEvent_t fsk_tst_timer;
 111:Core/Src/app_sx126x.c **** static volatile Fsk_test_state_t fsk_state = FSK_TEST_INIT;
 112:Core/Src/app_sx126x.c **** #define TST_PKT_NUM			1000
 113:Core/Src/app_sx126x.c **** static volatile uint32_t pkt_send = 0;
 114:Core/Src/app_sx126x.c **** static volatile uint32_t pkt_rx_num = 0;
 115:Core/Src/app_sx126x.c **** 
 116:Core/Src/app_sx126x.c **** /*!
 117:Core/Src/app_sx126x.c ****  * Radio events function pointer
 118:Core/Src/app_sx126x.c ****  */
 119:Core/Src/app_sx126x.c **** static RadioEvents_t RadioEvents;
 120:Core/Src/app_sx126x.c **** 
 121:Core/Src/app_sx126x.c **** /*!
 122:Core/Src/app_sx126x.c ****  * \brief Function to be executed on Radio Tx Done event
 123:Core/Src/app_sx126x.c ****  */
 124:Core/Src/app_sx126x.c **** void OnTxDone( void );
 125:Core/Src/app_sx126x.c **** 
 126:Core/Src/app_sx126x.c **** /*!
 127:Core/Src/app_sx126x.c ****  * \brief Function to be executed on Radio Rx Done event
 128:Core/Src/app_sx126x.c ****  */
 129:Core/Src/app_sx126x.c **** void OnRxDone( uint8_t *payload, uint16_t size, int16_t rssi, int8_t snr );
 130:Core/Src/app_sx126x.c **** 
 131:Core/Src/app_sx126x.c **** /*!
 132:Core/Src/app_sx126x.c ****  * \brief Function executed on Radio Tx Timeout event
 133:Core/Src/app_sx126x.c ****  */
 134:Core/Src/app_sx126x.c **** void OnTxTimeout( void );
 135:Core/Src/app_sx126x.c **** 
 136:Core/Src/app_sx126x.c **** /*!
 137:Core/Src/app_sx126x.c ****  * \brief Function executed on Radio Rx Timeout event
 138:Core/Src/app_sx126x.c ****  */
 139:Core/Src/app_sx126x.c **** void OnRxTimeout( void );
 140:Core/Src/app_sx126x.c **** 
 141:Core/Src/app_sx126x.c **** /*!
 142:Core/Src/app_sx126x.c ****  * \brief Function executed on Radio Rx Error event
 143:Core/Src/app_sx126x.c ****  */
 144:Core/Src/app_sx126x.c **** void OnRxError( void );
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 4


 145:Core/Src/app_sx126x.c **** 
 146:Core/Src/app_sx126x.c **** 
 147:Core/Src/app_sx126x.c **** void GenTriggerPulse( void )
 148:Core/Src/app_sx126x.c **** {
 149:Core/Src/app_sx126x.c **** 	GpioWrite(&Led2, 0);
 150:Core/Src/app_sx126x.c **** 	DelayMs(1);
 151:Core/Src/app_sx126x.c **** 	GpioWrite(&Led2, 1);
 152:Core/Src/app_sx126x.c **** 	DelayMs(1);
 153:Core/Src/app_sx126x.c **** 	GpioWrite(&Led2, 0);
 154:Core/Src/app_sx126x.c **** #if 0
 155:Core/Src/app_sx126x.c **** 	if(pkt_send < TST_PKT_NUM)
 156:Core/Src/app_sx126x.c **** 	{
 157:Core/Src/app_sx126x.c **** 		TimerStart(&fsk_tst_timer);
 158:Core/Src/app_sx126x.c **** 		pkt_send++;
 159:Core/Src/app_sx126x.c **** 		fsk_state = FSK_TSET_INPROCESS;
 160:Core/Src/app_sx126x.c **** 		//printf("PKT_Send: %d\n",pkt_send);
 161:Core/Src/app_sx126x.c **** 	}
 162:Core/Src/app_sx126x.c **** 	else
 163:Core/Src/app_sx126x.c **** 		fsk_state = FSK_TEST_DONE;
 164:Core/Src/app_sx126x.c **** #endif
 165:Core/Src/app_sx126x.c **** }
 166:Core/Src/app_sx126x.c **** /**
 167:Core/Src/app_sx126x.c ****  * @brief sx126x init
 168:Core/Src/app_sx126x.c ****  * 
 169:Core/Src/app_sx126x.c ****  */
 170:Core/Src/app_sx126x.c **** void sx126x_init(void)
 171:Core/Src/app_sx126x.c **** {
 172:Core/Src/app_sx126x.c **** bool isMaster = true;
 173:Core/Src/app_sx126x.c ****     uint8_t i;
 174:Core/Src/app_sx126x.c **** 
 175:Core/Src/app_sx126x.c ****     // Target board initialization
 176:Core/Src/app_sx126x.c ****     BoardInitMcu();
 177:Core/Src/app_sx126x.c ****     BoardInitPeriph();
 178:Core/Src/app_sx126x.c **** 
 179:Core/Src/app_sx126x.c ****     //Init the timer for fsk test
 180:Core/Src/app_sx126x.c ****     TimerInit(&fsk_tst_timer, GenTriggerPulse);
 181:Core/Src/app_sx126x.c ****     TimerSetValue(&fsk_tst_timer, 20);
 182:Core/Src/app_sx126x.c **** 
 183:Core/Src/app_sx126x.c ****     // Radio initialization
 184:Core/Src/app_sx126x.c ****     RadioEvents.TxDone = OnTxDone;
 185:Core/Src/app_sx126x.c ****     RadioEvents.RxDone = OnRxDone;
 186:Core/Src/app_sx126x.c ****     RadioEvents.TxTimeout = OnTxTimeout;
 187:Core/Src/app_sx126x.c ****     RadioEvents.RxTimeout = OnRxTimeout;
 188:Core/Src/app_sx126x.c ****     RadioEvents.RxError = OnRxError;
 189:Core/Src/app_sx126x.c **** 
 190:Core/Src/app_sx126x.c ****     Radio.Init(&RadioEvents);
 191:Core/Src/app_sx126x.c **** 
 192:Core/Src/app_sx126x.c ****     Radio.SetChannel(RF_FREQUENCY);
 193:Core/Src/app_sx126x.c **** 
 194:Core/Src/app_sx126x.c **** #if defined(USE_MODEM_LORA)
 195:Core/Src/app_sx126x.c **** 
 196:Core/Src/app_sx126x.c ****     Radio.SetTxConfig(MODEM_LORA, TX_OUTPUT_POWER, 0, LORA_BANDWIDTH,
 197:Core/Src/app_sx126x.c ****                       LORA_SPREADING_FACTOR, LORA_CODINGRATE,
 198:Core/Src/app_sx126x.c ****                       LORA_PREAMBLE_LENGTH, LORA_FIX_LENGTH_PAYLOAD_ON,
 199:Core/Src/app_sx126x.c ****                       true, 0, 0, LORA_IQ_INVERSION_ON, 3000);
 200:Core/Src/app_sx126x.c **** 
 201:Core/Src/app_sx126x.c ****     Radio.SetRxConfig(MODEM_LORA, LORA_BANDWIDTH, LORA_SPREADING_FACTOR,
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 5


 202:Core/Src/app_sx126x.c ****                       LORA_CODINGRATE, 0, LORA_PREAMBLE_LENGTH,
 203:Core/Src/app_sx126x.c ****                       LORA_SYMBOL_TIMEOUT, LORA_FIX_LENGTH_PAYLOAD_ON,
 204:Core/Src/app_sx126x.c ****                       0, true, 0, 0, LORA_IQ_INVERSION_ON, true);
 205:Core/Src/app_sx126x.c ****     Radio.Rx(0);
 206:Core/Src/app_sx126x.c **** #elif defined(USE_MODEM_FSK)
 207:Core/Src/app_sx126x.c **** 
 208:Core/Src/app_sx126x.c ****     Radio.SetTxConfig(MODEM_FSK, TX_OUTPUT_POWER, FSK_FDEV, 0,
 209:Core/Src/app_sx126x.c ****                       FSK_DATARATE, 0,
 210:Core/Src/app_sx126x.c ****                       FSK_PREAMBLE_LENGTH, FSK_FIX_LENGTH_PAYLOAD_ON,
 211:Core/Src/app_sx126x.c ****                       true, 0, 0, 0, 3000);
 212:Core/Src/app_sx126x.c **** 
 213:Core/Src/app_sx126x.c ****     // Radio.SetRxConfig(MODEM_FSK, FSK_BANDWIDTH, FSK_DATARATE,
 214:Core/Src/app_sx126x.c ****     //                   0, FSK_AFC_BANDWIDTH, FSK_PREAMBLE_LENGTH,
 215:Core/Src/app_sx126x.c ****     //                   0, FSK_FIX_LENGTH_PAYLOAD_ON, FSK_FIX_PAYLOAD_LEN, FSK_CRC_ON,
 216:Core/Src/app_sx126x.c ****     //                   0, 0, false, true);
 217:Core/Src/app_sx126x.c **** 
 218:Core/Src/app_sx126x.c ****     Radio.SetRxConfig(MODEM_FSK, FSK_BANDWIDTH, FSK_DATARATE,
 219:Core/Src/app_sx126x.c ****                       0, FSK_AFC_BANDWIDTH, FSK_PREAMBLE_LENGTH,
 220:Core/Src/app_sx126x.c ****                       0, FSK_FIX_LENGTH_PAYLOAD_ON, FSK_FIX_PAYLOAD_LEN, FSK_CRC_ON,
 221:Core/Src/app_sx126x.c ****                       0, 0, false, true);
 222:Core/Src/app_sx126x.c ****     Radio.RxBoosted(0);
 223:Core/Src/app_sx126x.c ****     //fsk_state = FSK_TEST_START;
 224:Core/Src/app_sx126x.c ****     //TimerStart(&fsk_tst_timer);
 225:Core/Src/app_sx126x.c ****     GenTriggerPulse();
 226:Core/Src/app_sx126x.c **** 
 227:Core/Src/app_sx126x.c **** #elif defined(USE_MODEM_GFSK)
 228:Core/Src/app_sx126x.c **** 
 229:Core/Src/app_sx126x.c ****     SX126xSetStandby(STDBY_RC);
 230:Core/Src/app_sx126x.c **** 
 231:Core/Src/app_sx126x.c ****     ModulationParams_t modulationParams;
 232:Core/Src/app_sx126x.c ****     modulationParams.PacketType = PACKET_TYPE_GFSK;
 233:Core/Src/app_sx126x.c ****     modulationParams.Params.Gfsk.BitRate = 38400;
 234:Core/Src/app_sx126x.c ****     modulationParams.Params.Gfsk.Bandwidth = RX_BW_117300;
 235:Core/Src/app_sx126x.c ****     modulationParams.Params.Gfsk.Fdev = 50000;
 236:Core/Src/app_sx126x.c ****     modulationParams.Params.Gfsk.ModulationShaping = MOD_SHAPING_G_BT_03;
 237:Core/Src/app_sx126x.c ****     SX126xSetModulationParams(&modulationParams);
 238:Core/Src/app_sx126x.c **** 
 239:Core/Src/app_sx126x.c ****     PacketParams_t packetParams;
 240:Core/Src/app_sx126x.c ****     packetParams.PacketType = PACKET_TYPE_GFSK;
 241:Core/Src/app_sx126x.c ****     packetParams.Params.Gfsk.PayloadLength = 52;
 242:Core/Src/app_sx126x.c ****     packetParams.Params.Gfsk.PreambleMinDetect = 10;
 243:Core/Src/app_sx126x.c ****     packetParams.Params.Gfsk.CrcLength = RADIO_CRC_OFF;
 244:Core/Src/app_sx126x.c ****     packetParams.Params.Gfsk.SyncWordLength = 1;
 245:Core/Src/app_sx126x.c ****     SX126xSetPacketParams(&packetParams);
 246:Core/Src/app_sx126x.c ****     uint8_t testsyncwd = 0xC1;
 247:Core/Src/app_sx126x.c ****     SX126xSetSyncWord(&testsyncwd /*SyncWords*/);
 248:Core/Src/app_sx126x.c ****     Radio.Rx(0);
 249:Core/Src/app_sx126x.c **** 
 250:Core/Src/app_sx126x.c **** #else
 251:Core/Src/app_sx126x.c **** #error "Please define a frequency band in the compiler options."
 252:Core/Src/app_sx126x.c **** #endif
 253:Core/Src/app_sx126x.c **** }
 254:Core/Src/app_sx126x.c **** /**
 255:Core/Src/app_sx126x.c ****  * @brief sx126x tx packet
 256:Core/Src/app_sx126x.c ****  * 
 257:Core/Src/app_sx126x.c ****  * @param p 
 258:Core/Src/app_sx126x.c ****  * @param len 
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 6


 259:Core/Src/app_sx126x.c ****  */
 260:Core/Src/app_sx126x.c **** void sx126x_tx_packet(unsigned char *p,unsigned char len)
 261:Core/Src/app_sx126x.c **** {
 262:Core/Src/app_sx126x.c ****     uint16_t irqRegs;
 263:Core/Src/app_sx126x.c ****     uint16_t crc;
 264:Core/Src/app_sx126x.c ****     int i;
 265:Core/Src/app_sx126x.c ****     // Buffer[0]=11^0xff;
 266:Core/Src/app_sx126x.c ****     Buffer[0]=0x07;
 267:Core/Src/app_sx126x.c ****     for ( i = 1; i <= 7; i++)
 268:Core/Src/app_sx126x.c ****     {
 269:Core/Src/app_sx126x.c ****         Buffer[i]=0x12+0x10*(i-1);
 270:Core/Src/app_sx126x.c ****         printf("the buffer[%d] is 0x%02x\n",i,Buffer[i]);
 271:Core/Src/app_sx126x.c ****     }
 272:Core/Src/app_sx126x.c ****     crc=crc16(Buffer,8);
 273:Core/Src/app_sx126x.c ****     Buffer[8]=crc>>8;
 274:Core/Src/app_sx126x.c ****     Buffer[9]=crc&0xff;
 275:Core/Src/app_sx126x.c ****     BufferSize=10;
 276:Core/Src/app_sx126x.c ****     // for (i = 1; i <= 10; i++)
 277:Core/Src/app_sx126x.c ****     // {
 278:Core/Src/app_sx126x.c ****     //     // Buffer[i]='A'+i;
 279:Core/Src/app_sx126x.c ****     //     //Buffer[i]=0x10+i;
 280:Core/Src/app_sx126x.c ****     //     // Buffer[i]=Buffer[i]^xorbuf[i];
 281:Core/Src/app_sx126x.c **** 
 282:Core/Src/app_sx126x.c ****     // }
 283:Core/Src/app_sx126x.c **** 
 284:Core/Src/app_sx126x.c ****     // for ( i = 0; i < 7; i++)
 285:Core/Src/app_sx126x.c ****     // {
 286:Core/Src/app_sx126x.c ****     //     Buffer[i]=0x12+0x10*(i);
 287:Core/Src/app_sx126x.c ****     //     // printf("the buffer[%d] is 0x%02x\n",i,Buffer[i]);
 288:Core/Src/app_sx126x.c ****     // }
 289:Core/Src/app_sx126x.c ****     
 290:Core/Src/app_sx126x.c ****     // BufferSize=7;
 291:Core/Src/app_sx126x.c ****     Radio.Standby();
 292:Core/Src/app_sx126x.c ****     
 293:Core/Src/app_sx126x.c ****     DelayMs(2);
 294:Core/Src/app_sx126x.c ****     irqRegs=SX126xGetIrqStatus();
 295:Core/Src/app_sx126x.c ****     SX126xClearIrqStatus(irqRegs);
 296:Core/Src/app_sx126x.c ****     Radio.Send( Buffer, BufferSize );
 297:Core/Src/app_sx126x.c ****     i=0;
 298:Core/Src/app_sx126x.c ****     while (1)
 299:Core/Src/app_sx126x.c ****     {
 300:Core/Src/app_sx126x.c ****         irqRegs=SX126xGetIrqStatus();
 301:Core/Src/app_sx126x.c ****         // printf("the Irq status is 0x%04x\n",irqRegs);
 302:Core/Src/app_sx126x.c ****         if((irqRegs&IRQ_TX_DONE) ==IRQ_TX_DONE)
 303:Core/Src/app_sx126x.c ****         {
 304:Core/Src/app_sx126x.c ****             printf("transmit finished\n");
 305:Core/Src/app_sx126x.c ****             GpioToggle(&Led1);
 306:Core/Src/app_sx126x.c ****             break;
 307:Core/Src/app_sx126x.c ****         }
 308:Core/Src/app_sx126x.c ****         else
 309:Core/Src/app_sx126x.c ****         {
 310:Core/Src/app_sx126x.c ****             // printf("--------\n");
 311:Core/Src/app_sx126x.c ****             i++;
 312:Core/Src/app_sx126x.c ****             HAL_Delay(10);
 313:Core/Src/app_sx126x.c ****             if(i>=200)
 314:Core/Src/app_sx126x.c ****             {
 315:Core/Src/app_sx126x.c ****                 printf("transmit timeout\n");
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 7


 316:Core/Src/app_sx126x.c ****                 break;
 317:Core/Src/app_sx126x.c ****             }
 318:Core/Src/app_sx126x.c ****         }
 319:Core/Src/app_sx126x.c ****     }
 320:Core/Src/app_sx126x.c **** 
 321:Core/Src/app_sx126x.c **** 
 322:Core/Src/app_sx126x.c **** }
 323:Core/Src/app_sx126x.c **** /**
 324:Core/Src/app_sx126x.c ****  * @brief sx126x rx packet
 325:Core/Src/app_sx126x.c ****  * 
 326:Core/Src/app_sx126x.c ****  */
 327:Core/Src/app_sx126x.c **** void sx126x_rx_packet(void)
 328:Core/Src/app_sx126x.c **** {
 329:Core/Src/app_sx126x.c ****     printf("#TST_Start\n");
 330:Core/Src/app_sx126x.c ****     while (1)
 331:Core/Src/app_sx126x.c ****     {
 332:Core/Src/app_sx126x.c ****         //TimerLowPowerHandler( );
 333:Core/Src/app_sx126x.c ****         Radio.IrqProcess();
 334:Core/Src/app_sx126x.c ****     }
 335:Core/Src/app_sx126x.c **** }
 336:Core/Src/app_sx126x.c **** /**
 337:Core/Src/app_sx126x.c ****  * @brief 
 338:Core/Src/app_sx126x.c ****  * 
 339:Core/Src/app_sx126x.c ****  */
 340:Core/Src/app_sx126x.c **** void register_test(void)
 341:Core/Src/app_sx126x.c **** {
 342:Core/Src/app_sx126x.c ****     //write register
 343:Core/Src/app_sx126x.c ****     char xx[20];
 344:Core/Src/app_sx126x.c ****     int a;
 345:Core/Src/app_sx126x.c ****     printf("register write and read test\n");
 346:Core/Src/app_sx126x.c ****     SX126xWriteRegister(0x06C0, 0x12);
 347:Core/Src/app_sx126x.c ****     SX126xWriteRegister(0x06C1, 0x34);
 348:Core/Src/app_sx126x.c ****     SX126xWriteRegister(0x06C2, 0x56);
 349:Core/Src/app_sx126x.c ****     SX126xWriteRegister(0x06C3, 0x78);
 350:Core/Src/app_sx126x.c **** 
 351:Core/Src/app_sx126x.c ****     a=SX126xReadRegister(0x06C0);
 352:Core/Src/app_sx126x.c ****     sprintf(xx,"the sync 0 is 0x%02x\n",a);
 353:Core/Src/app_sx126x.c ****     printf(xx);
 354:Core/Src/app_sx126x.c **** 
 355:Core/Src/app_sx126x.c ****     a=SX126xReadRegister(0x06C1);
 356:Core/Src/app_sx126x.c ****     sprintf(xx,"the sync 1 is 0x%02x\n",a);
 357:Core/Src/app_sx126x.c ****     printf(xx);
 358:Core/Src/app_sx126x.c **** 
 359:Core/Src/app_sx126x.c ****     a=SX126xReadRegister(0x06C2);
 360:Core/Src/app_sx126x.c ****     sprintf(xx,"the sync 2 is 0x%02x\n",a);
 361:Core/Src/app_sx126x.c ****     printf(xx);
 362:Core/Src/app_sx126x.c **** 
 363:Core/Src/app_sx126x.c ****     a=SX126xReadRegister(0x06C3);
 364:Core/Src/app_sx126x.c ****     sprintf(xx,"the sync 3 is 0x%02x\n",a);
 365:Core/Src/app_sx126x.c ****     printf(xx);
 366:Core/Src/app_sx126x.c **** }
 367:Core/Src/app_sx126x.c **** 
 368:Core/Src/app_sx126x.c **** /**
 369:Core/Src/app_sx126x.c ****  * @brief receive packet
 370:Core/Src/app_sx126x.c ****  * 
 371:Core/Src/app_sx126x.c ****  */
 372:Core/Src/app_sx126x.c **** void packet_rx(void)
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 8


 373:Core/Src/app_sx126x.c **** {
 374:Core/Src/app_sx126x.c ****     int i;
 375:Core/Src/app_sx126x.c ****     uint16_t irqRegs = SX126xGetIrqStatus();
 376:Core/Src/app_sx126x.c ****     uint8_t rxbuf[255];
 377:Core/Src/app_sx126x.c ****     
 378:Core/Src/app_sx126x.c ****     uint8_t size=0;
 379:Core/Src/app_sx126x.c ****     PacketStatus_t radiopkstatus;
 380:Core/Src/app_sx126x.c ****     SX126xClearIrqStatus(irqRegs);
 381:Core/Src/app_sx126x.c ****     // Radio.Rx(0);
 382:Core/Src/app_sx126x.c ****     Radio.RxBoosted(0);
 383:Core/Src/app_sx126x.c ****     i=0;
 384:Core/Src/app_sx126x.c ****     while (1)
 385:Core/Src/app_sx126x.c ****     {
 386:Core/Src/app_sx126x.c ****         irqRegs = SX126xGetIrqStatus();
 387:Core/Src/app_sx126x.c **** 
 388:Core/Src/app_sx126x.c ****         // printf("the Irq status is 0x%04x\n",irqRegs);
 389:Core/Src/app_sx126x.c ****         if((irqRegs&IRQ_RX_DONE)==IRQ_RX_DONE)
 390:Core/Src/app_sx126x.c ****         {
 391:Core/Src/app_sx126x.c ****             printf("receive packet successfully\n");
 392:Core/Src/app_sx126x.c ****             GpioToggle(&Led2);
 393:Core/Src/app_sx126x.c **** 
 394:Core/Src/app_sx126x.c ****             SX126xGetPayload( rxbuf, &size , 255 );
 395:Core/Src/app_sx126x.c ****             printf("the receive length is %d\n",size);
 396:Core/Src/app_sx126x.c ****             // size=20;
 397:Core/Src/app_sx126x.c ****             for (i = 0; i < size; i++)
 398:Core/Src/app_sx126x.c ****             {
 399:Core/Src/app_sx126x.c ****                 // rxbuf[i]=rxbuf[i]^xorbuf[i];
 400:Core/Src/app_sx126x.c ****                 printf("0x%02x ,",rxbuf[i]);
 401:Core/Src/app_sx126x.c ****                 // printf("%c ",rxbuf[i]);
 402:Core/Src/app_sx126x.c ****             }
 403:Core/Src/app_sx126x.c ****             // printf("\nthe crc is :");
 404:Core/Src/app_sx126x.c ****             // printf("0x%02x ,",rxbuf[11]);
 405:Core/Src/app_sx126x.c ****             // printf("0x%02x ,",rxbuf[12]);
 406:Core/Src/app_sx126x.c ****             printf("\n");
 407:Core/Src/app_sx126x.c ****             SX126xGetPacketStatus(&radiopkstatus);
 408:Core/Src/app_sx126x.c ****             printf("the rssi is %d\n", radiopkstatus.Params.Gfsk.RssiAvg);
 409:Core/Src/app_sx126x.c **** 
 410:Core/Src/app_sx126x.c ****             break;
 411:Core/Src/app_sx126x.c ****         }
 412:Core/Src/app_sx126x.c ****         else
 413:Core/Src/app_sx126x.c ****         {
 414:Core/Src/app_sx126x.c ****             i++;
 415:Core/Src/app_sx126x.c ****             HAL_Delay(1);
 416:Core/Src/app_sx126x.c ****             if(i>=100)
 417:Core/Src/app_sx126x.c ****             {
 418:Core/Src/app_sx126x.c ****                 printf("receive timeout\n");
 419:Core/Src/app_sx126x.c ****                 break;
 420:Core/Src/app_sx126x.c ****             }
 421:Core/Src/app_sx126x.c ****         }
 422:Core/Src/app_sx126x.c ****     }
 423:Core/Src/app_sx126x.c ****     Radio.Standby();
 424:Core/Src/app_sx126x.c ****     HAL_Delay(10);
 425:Core/Src/app_sx126x.c **** }
 426:Core/Src/app_sx126x.c **** 
 427:Core/Src/app_sx126x.c **** /**
 428:Core/Src/app_sx126x.c ****  * @brief crc16 for IBM
 429:Core/Src/app_sx126x.c ****  * which can get the same result as si4463
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 9


 430:Core/Src/app_sx126x.c ****  * the important factor is not reverse,start from the MSB
 431:Core/Src/app_sx126x.c ****  * @param data
 432:Core/Src/app_sx126x.c ****  * @param length 
 433:Core/Src/app_sx126x.c ****  * @return unsigned int 
 434:Core/Src/app_sx126x.c ****  */
 435:Core/Src/app_sx126x.c **** unsigned int crc16(unsigned char *data, unsigned char length)
 436:Core/Src/app_sx126x.c **** {
 437:Core/Src/app_sx126x.c ****   int j;
 438:Core/Src/app_sx126x.c ****   // unsigned int reg_crc = 0xFFFF;
 439:Core/Src/app_sx126x.c ****   unsigned int reg_crc = 0x0000;
 440:Core/Src/app_sx126x.c ****   // unsigned int reg_crc = 0x4230;
 441:Core/Src/app_sx126x.c ****   while (length--)
 442:Core/Src/app_sx126x.c ****   {
 443:Core/Src/app_sx126x.c **** 
 444:Core/Src/app_sx126x.c ****     reg_crc ^= (*data++<<8);
 445:Core/Src/app_sx126x.c ****     for (j = 0; j < 8; j++)
 446:Core/Src/app_sx126x.c ****     {
 447:Core/Src/app_sx126x.c ****       if (reg_crc & 0x8000)
 448:Core/Src/app_sx126x.c ****       {
 449:Core/Src/app_sx126x.c ****         // reg_crc = (reg_crc >> 1) ^ 0xA001;
 450:Core/Src/app_sx126x.c ****         reg_crc = (reg_crc << 1) ^ 0x8005;
 451:Core/Src/app_sx126x.c ****       }
 452:Core/Src/app_sx126x.c ****       else
 453:Core/Src/app_sx126x.c ****       {
 454:Core/Src/app_sx126x.c ****         reg_crc = reg_crc << 1;
 455:Core/Src/app_sx126x.c ****       }
 456:Core/Src/app_sx126x.c ****     }
 457:Core/Src/app_sx126x.c ****   }
 458:Core/Src/app_sx126x.c ****   reg_crc&=0xffff;
 459:Core/Src/app_sx126x.c ****   return reg_crc;
 460:Core/Src/app_sx126x.c **** }
 461:Core/Src/app_sx126x.c **** 
 462:Core/Src/app_sx126x.c **** 
 463:Core/Src/app_sx126x.c **** /**
 464:Core/Src/app_sx126x.c ****  * Main application entry point.
 465:Core/Src/app_sx126x.c ****  */
 466:Core/Src/app_sx126x.c **** int main1( void )
 467:Core/Src/app_sx126x.c **** {
 468:Core/Src/app_sx126x.c ****     bool isMaster = true;
 469:Core/Src/app_sx126x.c ****     uint8_t i;
 470:Core/Src/app_sx126x.c **** 
 471:Core/Src/app_sx126x.c ****     // Target board initialization
 472:Core/Src/app_sx126x.c ****     BoardInitMcu( );
 473:Core/Src/app_sx126x.c ****     BoardInitPeriph( );
 474:Core/Src/app_sx126x.c **** 	
 475:Core/Src/app_sx126x.c **** 	  //Init the timer for fsk test
 476:Core/Src/app_sx126x.c **** 	  TimerInit(&fsk_tst_timer,GenTriggerPulse);
 477:Core/Src/app_sx126x.c **** 		TimerSetValue(&fsk_tst_timer,20);
 478:Core/Src/app_sx126x.c **** 
 479:Core/Src/app_sx126x.c ****     // Radio initialization
 480:Core/Src/app_sx126x.c ****     RadioEvents.TxDone = OnTxDone;
 481:Core/Src/app_sx126x.c ****     RadioEvents.RxDone = OnRxDone;
 482:Core/Src/app_sx126x.c ****     RadioEvents.TxTimeout = OnTxTimeout;
 483:Core/Src/app_sx126x.c ****     RadioEvents.RxTimeout = OnRxTimeout;
 484:Core/Src/app_sx126x.c ****     RadioEvents.RxError = OnRxError;
 485:Core/Src/app_sx126x.c **** 
 486:Core/Src/app_sx126x.c ****     Radio.Init( &RadioEvents );
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 10


 487:Core/Src/app_sx126x.c **** 
 488:Core/Src/app_sx126x.c ****     Radio.SetChannel( RF_FREQUENCY );
 489:Core/Src/app_sx126x.c **** 
 490:Core/Src/app_sx126x.c **** #if defined( USE_MODEM_LORA )
 491:Core/Src/app_sx126x.c **** 
 492:Core/Src/app_sx126x.c ****     Radio.SetTxConfig( MODEM_LORA, TX_OUTPUT_POWER, 0, LORA_BANDWIDTH,
 493:Core/Src/app_sx126x.c ****                                    LORA_SPREADING_FACTOR, LORA_CODINGRATE,
 494:Core/Src/app_sx126x.c ****                                    LORA_PREAMBLE_LENGTH, LORA_FIX_LENGTH_PAYLOAD_ON,
 495:Core/Src/app_sx126x.c ****                                    true, 0, 0, LORA_IQ_INVERSION_ON, 3000 );
 496:Core/Src/app_sx126x.c **** 
 497:Core/Src/app_sx126x.c ****     Radio.SetRxConfig( MODEM_LORA, LORA_BANDWIDTH, LORA_SPREADING_FACTOR,
 498:Core/Src/app_sx126x.c ****                                    LORA_CODINGRATE, 0, LORA_PREAMBLE_LENGTH,
 499:Core/Src/app_sx126x.c ****                                    LORA_SYMBOL_TIMEOUT, LORA_FIX_LENGTH_PAYLOAD_ON,
 500:Core/Src/app_sx126x.c ****                                    0, true, 0, 0, LORA_IQ_INVERSION_ON, true );
 501:Core/Src/app_sx126x.c **** 		Radio.Rx( 0 );
 502:Core/Src/app_sx126x.c **** #elif defined( USE_MODEM_FSK )
 503:Core/Src/app_sx126x.c **** 
 504:Core/Src/app_sx126x.c ****     Radio.SetTxConfig( MODEM_FSK, TX_OUTPUT_POWER, FSK_FDEV, 0,
 505:Core/Src/app_sx126x.c ****                                   FSK_DATARATE, 0,
 506:Core/Src/app_sx126x.c ****                                   FSK_PREAMBLE_LENGTH, FSK_FIX_LENGTH_PAYLOAD_ON,
 507:Core/Src/app_sx126x.c ****                                   true, 0, 0, 0, 3000 );
 508:Core/Src/app_sx126x.c **** 																														
 509:Core/Src/app_sx126x.c **** 	
 510:Core/Src/app_sx126x.c ****     Radio.SetRxConfig( MODEM_FSK, FSK_BANDWIDTH, FSK_DATARATE,
 511:Core/Src/app_sx126x.c ****                                   0, FSK_AFC_BANDWIDTH, FSK_PREAMBLE_LENGTH,
 512:Core/Src/app_sx126x.c ****                                   0, FSK_FIX_LENGTH_PAYLOAD_ON, FSK_FIX_PAYLOAD_LEN, FSK_CRC_ON,
 513:Core/Src/app_sx126x.c ****                                   0, 0,false, true );
 514:Core/Src/app_sx126x.c **** 		Radio.RxBoosted(0);
 515:Core/Src/app_sx126x.c **** 		//fsk_state = FSK_TEST_START;
 516:Core/Src/app_sx126x.c **** 		//TimerStart(&fsk_tst_timer);
 517:Core/Src/app_sx126x.c ****     GenTriggerPulse();
 518:Core/Src/app_sx126x.c **** 
 519:Core/Src/app_sx126x.c **** #elif defined( USE_MODEM_GFSK )
 520:Core/Src/app_sx126x.c **** 
 521:Core/Src/app_sx126x.c **** 		SX126xSetStandby(STDBY_RC);
 522:Core/Src/app_sx126x.c **** 	
 523:Core/Src/app_sx126x.c **** 		ModulationParams_t modulationParams;
 524:Core/Src/app_sx126x.c **** 		modulationParams.PacketType = PACKET_TYPE_GFSK;
 525:Core/Src/app_sx126x.c **** 		modulationParams.Params.Gfsk.BitRate = 38400;
 526:Core/Src/app_sx126x.c **** 		modulationParams.Params.Gfsk.Bandwidth = RX_BW_117300;
 527:Core/Src/app_sx126x.c **** 		modulationParams.Params.Gfsk.Fdev = 50000;
 528:Core/Src/app_sx126x.c **** 		modulationParams.Params.Gfsk.ModulationShaping = MOD_SHAPING_G_BT_03;
 529:Core/Src/app_sx126x.c **** 		SX126xSetModulationParams(&modulationParams);
 530:Core/Src/app_sx126x.c **** 		
 531:Core/Src/app_sx126x.c **** 		PacketParams_t packetParams;
 532:Core/Src/app_sx126x.c **** 		packetParams.PacketType = PACKET_TYPE_GFSK;
 533:Core/Src/app_sx126x.c **** 		packetParams.Params.Gfsk.PayloadLength = 52;
 534:Core/Src/app_sx126x.c **** 		packetParams.Params.Gfsk.PreambleMinDetect = 10;
 535:Core/Src/app_sx126x.c **** 		packetParams.Params.Gfsk.CrcLength = RADIO_CRC_OFF;
 536:Core/Src/app_sx126x.c **** 		packetParams.Params.Gfsk.SyncWordLength = 1;
 537:Core/Src/app_sx126x.c **** 		SX126xSetPacketParams(&packetParams);
 538:Core/Src/app_sx126x.c **** 		uint8_t testsyncwd = 0xC1;
 539:Core/Src/app_sx126x.c **** 		SX126xSetSyncWord(&testsyncwd/*SyncWords*/);
 540:Core/Src/app_sx126x.c **** 		Radio.Rx(0);
 541:Core/Src/app_sx126x.c **** 	  
 542:Core/Src/app_sx126x.c **** 		
 543:Core/Src/app_sx126x.c **** #else
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 11


 544:Core/Src/app_sx126x.c ****     #error "Please define a frequency band in the compiler options."
 545:Core/Src/app_sx126x.c **** #endif
 546:Core/Src/app_sx126x.c **** 
 547:Core/Src/app_sx126x.c **** 		printf("#TST_Start\n");
 548:Core/Src/app_sx126x.c **** 		while(1)
 549:Core/Src/app_sx126x.c **** 		{
 550:Core/Src/app_sx126x.c **** 			//TimerLowPowerHandler( );
 551:Core/Src/app_sx126x.c **** 			Radio.IrqProcess( );
 552:Core/Src/app_sx126x.c **** 		}
 553:Core/Src/app_sx126x.c **** 
 554:Core/Src/app_sx126x.c **** #if 0
 555:Core/Src/app_sx126x.c ****     while( 1 )
 556:Core/Src/app_sx126x.c ****     {
 557:Core/Src/app_sx126x.c ****         switch( State )
 558:Core/Src/app_sx126x.c ****         {
 559:Core/Src/app_sx126x.c ****         case RX:
 560:Core/Src/app_sx126x.c ****             if( isMaster == true )
 561:Core/Src/app_sx126x.c ****             {
 562:Core/Src/app_sx126x.c ****                 if( BufferSize > 0 )
 563:Core/Src/app_sx126x.c ****                 {
 564:Core/Src/app_sx126x.c ****                     if( strncmp( ( const char* )Buffer, ( const char* )PongMsg, 4 ) == 0 )
 565:Core/Src/app_sx126x.c ****                     {
 566:Core/Src/app_sx126x.c ****                         // Indicates on a LED that the received frame is a PONG
 567:Core/Src/app_sx126x.c ****                         GpioToggle( &Led1 );
 568:Core/Src/app_sx126x.c **** 
 569:Core/Src/app_sx126x.c ****                         // Send the next PING frame
 570:Core/Src/app_sx126x.c ****                         Buffer[0] = 'P';
 571:Core/Src/app_sx126x.c ****                         Buffer[1] = 'I';
 572:Core/Src/app_sx126x.c ****                         Buffer[2] = 'N';
 573:Core/Src/app_sx126x.c ****                         Buffer[3] = 'G';
 574:Core/Src/app_sx126x.c ****                         // We fill the buffer with numbers for the payload
 575:Core/Src/app_sx126x.c ****                         for( i = 4; i < BufferSize; i++ )
 576:Core/Src/app_sx126x.c ****                         {
 577:Core/Src/app_sx126x.c ****                             Buffer[i] = i - 4;
 578:Core/Src/app_sx126x.c ****                         }
 579:Core/Src/app_sx126x.c ****                         DelayMs( 1 );
 580:Core/Src/app_sx126x.c ****                         Radio.Send( Buffer, BufferSize );
 581:Core/Src/app_sx126x.c ****                     }
 582:Core/Src/app_sx126x.c ****                     else if( strncmp( ( const char* )Buffer, ( const char* )PingMsg, 4 ) == 0 )
 583:Core/Src/app_sx126x.c ****                     { // A master already exists then become a slave
 584:Core/Src/app_sx126x.c ****                         isMaster = false;
 585:Core/Src/app_sx126x.c ****                         GpioToggle( &Led2 ); // Set LED off
 586:Core/Src/app_sx126x.c ****                         Radio.Rx( RX_TIMEOUT_VALUE );
 587:Core/Src/app_sx126x.c ****                     }
 588:Core/Src/app_sx126x.c ****                     else // valid reception but neither a PING or a PONG message
 589:Core/Src/app_sx126x.c ****                     {    // Set device as master ans start again
 590:Core/Src/app_sx126x.c ****                         isMaster = true;
 591:Core/Src/app_sx126x.c ****                         Radio.Rx( RX_TIMEOUT_VALUE );
 592:Core/Src/app_sx126x.c ****                     }
 593:Core/Src/app_sx126x.c ****                 }
 594:Core/Src/app_sx126x.c ****             }
 595:Core/Src/app_sx126x.c ****             else
 596:Core/Src/app_sx126x.c ****             {
 597:Core/Src/app_sx126x.c ****                 if( BufferSize > 0 )
 598:Core/Src/app_sx126x.c ****                 {
 599:Core/Src/app_sx126x.c ****                     if( strncmp( ( const char* )Buffer, ( const char* )PingMsg, 4 ) == 0 )
 600:Core/Src/app_sx126x.c ****                     {
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 12


 601:Core/Src/app_sx126x.c ****                         // Indicates on a LED that the received frame is a PING
 602:Core/Src/app_sx126x.c ****                         GpioToggle( &Led1 );
 603:Core/Src/app_sx126x.c **** 
 604:Core/Src/app_sx126x.c ****                         // Send the reply to the PONG string
 605:Core/Src/app_sx126x.c ****                         Buffer[0] = 'P';
 606:Core/Src/app_sx126x.c ****                         Buffer[1] = 'O';
 607:Core/Src/app_sx126x.c ****                         Buffer[2] = 'N';
 608:Core/Src/app_sx126x.c ****                         Buffer[3] = 'G';
 609:Core/Src/app_sx126x.c ****                         // We fill the buffer with numbers for the payload
 610:Core/Src/app_sx126x.c ****                         for( i = 4; i < BufferSize; i++ )
 611:Core/Src/app_sx126x.c ****                         {
 612:Core/Src/app_sx126x.c ****                             Buffer[i] = i - 4;
 613:Core/Src/app_sx126x.c ****                         }
 614:Core/Src/app_sx126x.c ****                         DelayMs( 1 );
 615:Core/Src/app_sx126x.c ****                         Radio.Send( Buffer, BufferSize );
 616:Core/Src/app_sx126x.c ****                     }
 617:Core/Src/app_sx126x.c ****                     else // valid reception but not a PING as expected
 618:Core/Src/app_sx126x.c ****                     {    // Set device as master and start again
 619:Core/Src/app_sx126x.c ****                         isMaster = true;
 620:Core/Src/app_sx126x.c ****                         Radio.Rx( RX_TIMEOUT_VALUE );
 621:Core/Src/app_sx126x.c ****                     }
 622:Core/Src/app_sx126x.c ****                 }
 623:Core/Src/app_sx126x.c ****             }
 624:Core/Src/app_sx126x.c ****             State = LOWPOWER;
 625:Core/Src/app_sx126x.c ****             break;
 626:Core/Src/app_sx126x.c ****         case TX:
 627:Core/Src/app_sx126x.c ****             // Indicates on a LED that we have sent a PING [Master]
 628:Core/Src/app_sx126x.c ****             // Indicates on a LED that we have sent a PONG [Slave]
 629:Core/Src/app_sx126x.c ****             GpioToggle( &Led2 );
 630:Core/Src/app_sx126x.c ****             Radio.Rx( RX_TIMEOUT_VALUE );
 631:Core/Src/app_sx126x.c ****             State = LOWPOWER;
 632:Core/Src/app_sx126x.c ****             break;
 633:Core/Src/app_sx126x.c ****         case RX_TIMEOUT:
 634:Core/Src/app_sx126x.c ****         case RX_ERROR:
 635:Core/Src/app_sx126x.c ****             if( isMaster == true )
 636:Core/Src/app_sx126x.c ****             {
 637:Core/Src/app_sx126x.c ****                 // Send the next PING frame
 638:Core/Src/app_sx126x.c ****                 Buffer[0] = 'P';
 639:Core/Src/app_sx126x.c ****                 Buffer[1] = 'I';
 640:Core/Src/app_sx126x.c ****                 Buffer[2] = 'N';
 641:Core/Src/app_sx126x.c ****                 Buffer[3] = 'G';
 642:Core/Src/app_sx126x.c ****                 for( i = 4; i < BufferSize; i++ )
 643:Core/Src/app_sx126x.c ****                 {
 644:Core/Src/app_sx126x.c ****                     Buffer[i] = i - 4;
 645:Core/Src/app_sx126x.c ****                 }
 646:Core/Src/app_sx126x.c ****                 DelayMs( 1 );
 647:Core/Src/app_sx126x.c ****                 Radio.Send( Buffer, BufferSize );
 648:Core/Src/app_sx126x.c ****             }
 649:Core/Src/app_sx126x.c ****             else
 650:Core/Src/app_sx126x.c ****             {
 651:Core/Src/app_sx126x.c ****                 Radio.Rx( RX_TIMEOUT_VALUE );
 652:Core/Src/app_sx126x.c ****             }
 653:Core/Src/app_sx126x.c ****             State = LOWPOWER;
 654:Core/Src/app_sx126x.c ****             break;
 655:Core/Src/app_sx126x.c ****         case TX_TIMEOUT:
 656:Core/Src/app_sx126x.c ****             Radio.Rx( RX_TIMEOUT_VALUE );
 657:Core/Src/app_sx126x.c ****             State = LOWPOWER;
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 13


 658:Core/Src/app_sx126x.c ****             break;
 659:Core/Src/app_sx126x.c ****         case LOWPOWER:
 660:Core/Src/app_sx126x.c ****         default:
 661:Core/Src/app_sx126x.c ****             // Set low power
 662:Core/Src/app_sx126x.c ****             break;
 663:Core/Src/app_sx126x.c ****         }
 664:Core/Src/app_sx126x.c **** 
 665:Core/Src/app_sx126x.c ****         TimerLowPowerHandler( );
 666:Core/Src/app_sx126x.c ****         // Process Radio IRQ
 667:Core/Src/app_sx126x.c ****         Radio.IrqProcess( );
 668:Core/Src/app_sx126x.c **** 
 669:Core/Src/app_sx126x.c ****     }
 670:Core/Src/app_sx126x.c **** #endif
 671:Core/Src/app_sx126x.c **** }
 672:Core/Src/app_sx126x.c **** 
 673:Core/Src/app_sx126x.c **** void OnTxDone( void )
 674:Core/Src/app_sx126x.c **** {
  29              		.loc 1 674 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
 675:Core/Src/app_sx126x.c ****     Radio.Sleep( );
  38              		.loc 1 675 5 view .LVU1
  39              		.loc 1 675 10 is_stmt 0 view .LVU2
  40 0002 034B     		ldr	r3, .L3
  41 0004 DB6A     		ldr	r3, [r3, #44]
  42              		.loc 1 675 5 view .LVU3
  43 0006 9847     		blx	r3
  44              	.LVL0:
 676:Core/Src/app_sx126x.c ****     State = TX;
  45              		.loc 1 676 5 is_stmt 1 view .LVU4
  46              		.loc 1 676 11 is_stmt 0 view .LVU5
  47 0008 024B     		ldr	r3, .L3+4
  48 000a 0422     		movs	r2, #4
  49 000c 1A70     		strb	r2, [r3]
 677:Core/Src/app_sx126x.c **** }
  50              		.loc 1 677 1 view .LVU6
  51 000e 08BD     		pop	{r3, pc}
  52              	.L4:
  53              		.align	2
  54              	.L3:
  55 0010 00000000 		.word	Radio
  56 0014 00000000 		.word	.LANCHOR0
  57              		.cfi_endproc
  58              	.LFE143:
  60              		.section	.text.OnTxTimeout,"ax",%progbits
  61              		.align	1
  62              		.global	OnTxTimeout
  63              		.syntax unified
  64              		.thumb
  65              		.thumb_func
  66              		.fpu fpv4-sp-d16
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 14


  68              	OnTxTimeout:
  69              	.LFB146:
 678:Core/Src/app_sx126x.c **** void DUMP(uint8_t* payload, uint16_t len)
 679:Core/Src/app_sx126x.c **** {
 680:Core/Src/app_sx126x.c **** 	printf("payload recieved\n");
 681:Core/Src/app_sx126x.c **** 	uint16_t i = 0;
 682:Core/Src/app_sx126x.c **** 	for(i = 0; i< len; i++)
 683:Core/Src/app_sx126x.c **** 		printf("%02x ",*payload++);
 684:Core/Src/app_sx126x.c **** 	printf("\n");
 685:Core/Src/app_sx126x.c **** }
 686:Core/Src/app_sx126x.c **** 
 687:Core/Src/app_sx126x.c **** void OnRxDone( uint8_t *payload, uint16_t size, int16_t rssi, int8_t snr )
 688:Core/Src/app_sx126x.c **** {
 689:Core/Src/app_sx126x.c **** #if 0
 690:Core/Src/app_sx126x.c ****     Radio.Sleep( );
 691:Core/Src/app_sx126x.c ****     BufferSize = size;
 692:Core/Src/app_sx126x.c ****     memcpy( Buffer, payload, BufferSize );
 693:Core/Src/app_sx126x.c ****     RssiValue = rssi;
 694:Core/Src/app_sx126x.c ****     SnrValue = snr;
 695:Core/Src/app_sx126x.c ****     State = RX;
 696:Core/Src/app_sx126x.c **** #endif
 697:Core/Src/app_sx126x.c **** 		printf("RX done\r\n");
 698:Core/Src/app_sx126x.c ****     DUMP(payload, size);
 699:Core/Src/app_sx126x.c **** 	  //pkt_rx_num++;
 700:Core/Src/app_sx126x.c **** 	  //printf("#PKT: %d, RSSI: %d\n",++pkt_rx_num,rssi);
 701:Core/Src/app_sx126x.c **** 		State = RX;
 702:Core/Src/app_sx126x.c **** 	  Radio.Rx(0);
 703:Core/Src/app_sx126x.c **** }
 704:Core/Src/app_sx126x.c **** 
 705:Core/Src/app_sx126x.c **** void OnTxTimeout( void )
 706:Core/Src/app_sx126x.c **** {
  70              		.loc 1 706 1 is_stmt 1 view -0
  71              		.cfi_startproc
  72              		@ args = 0, pretend = 0, frame = 0
  73              		@ frame_needed = 0, uses_anonymous_args = 0
  74 0000 08B5     		push	{r3, lr}
  75              	.LCFI1:
  76              		.cfi_def_cfa_offset 8
  77              		.cfi_offset 3, -8
  78              		.cfi_offset 14, -4
 707:Core/Src/app_sx126x.c ****     Radio.Sleep( );
  79              		.loc 1 707 5 view .LVU8
  80              		.loc 1 707 10 is_stmt 0 view .LVU9
  81 0002 034B     		ldr	r3, .L7
  82 0004 DB6A     		ldr	r3, [r3, #44]
  83              		.loc 1 707 5 view .LVU10
  84 0006 9847     		blx	r3
  85              	.LVL1:
 708:Core/Src/app_sx126x.c ****     State = TX_TIMEOUT;
  86              		.loc 1 708 5 is_stmt 1 view .LVU11
  87              		.loc 1 708 11 is_stmt 0 view .LVU12
  88 0008 024B     		ldr	r3, .L7+4
  89 000a 0522     		movs	r2, #5
  90 000c 1A70     		strb	r2, [r3]
 709:Core/Src/app_sx126x.c **** }
  91              		.loc 1 709 1 view .LVU13
  92 000e 08BD     		pop	{r3, pc}
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 15


  93              	.L8:
  94              		.align	2
  95              	.L7:
  96 0010 00000000 		.word	Radio
  97 0014 00000000 		.word	.LANCHOR0
  98              		.cfi_endproc
  99              	.LFE146:
 101              		.section	.text.GenTriggerPulse,"ax",%progbits
 102              		.align	1
 103              		.global	GenTriggerPulse
 104              		.syntax unified
 105              		.thumb
 106              		.thumb_func
 107              		.fpu fpv4-sp-d16
 109              	GenTriggerPulse:
 110              	.LFB135:
 148:Core/Src/app_sx126x.c **** 	GpioWrite(&Led2, 0);
 111              		.loc 1 148 1 is_stmt 1 view -0
 112              		.cfi_startproc
 113              		@ args = 0, pretend = 0, frame = 0
 114              		@ frame_needed = 0, uses_anonymous_args = 0
 115 0000 10B5     		push	{r4, lr}
 116              	.LCFI2:
 117              		.cfi_def_cfa_offset 8
 118              		.cfi_offset 4, -8
 119              		.cfi_offset 14, -4
 149:Core/Src/app_sx126x.c **** 	DelayMs(1);
 120              		.loc 1 149 2 view .LVU15
 121 0002 0A4C     		ldr	r4, .L11
 122 0004 0021     		movs	r1, #0
 123 0006 2046     		mov	r0, r4
 124 0008 FFF7FEFF 		bl	GpioWrite
 125              	.LVL2:
 150:Core/Src/app_sx126x.c **** 	GpioWrite(&Led2, 1);
 126              		.loc 1 150 2 view .LVU16
 127 000c 0120     		movs	r0, #1
 128 000e FFF7FEFF 		bl	DelayMs
 129              	.LVL3:
 151:Core/Src/app_sx126x.c **** 	DelayMs(1);
 130              		.loc 1 151 2 view .LVU17
 131 0012 0121     		movs	r1, #1
 132 0014 2046     		mov	r0, r4
 133 0016 FFF7FEFF 		bl	GpioWrite
 134              	.LVL4:
 152:Core/Src/app_sx126x.c **** 	GpioWrite(&Led2, 0);
 135              		.loc 1 152 2 view .LVU18
 136 001a 0120     		movs	r0, #1
 137 001c FFF7FEFF 		bl	DelayMs
 138              	.LVL5:
 153:Core/Src/app_sx126x.c **** #if 0
 139              		.loc 1 153 2 view .LVU19
 140 0020 0021     		movs	r1, #0
 141 0022 2046     		mov	r0, r4
 142 0024 FFF7FEFF 		bl	GpioWrite
 143              	.LVL6:
 165:Core/Src/app_sx126x.c **** /**
 144              		.loc 1 165 1 is_stmt 0 view .LVU20
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 16


 145 0028 10BD     		pop	{r4, pc}
 146              	.L12:
 147 002a 00BF     		.align	2
 148              	.L11:
 149 002c 00000000 		.word	Led2
 150              		.cfi_endproc
 151              	.LFE135:
 153              		.section	.rodata.OnRxTimeout.str1.4,"aMS",%progbits,1
 154              		.align	2
 155              	.LC0:
 156 0000 52782074 		.ascii	"Rx timeout\000"
 156      696D656F 
 156      757400
 157              		.section	.text.OnRxTimeout,"ax",%progbits
 158              		.align	1
 159              		.global	OnRxTimeout
 160              		.syntax unified
 161              		.thumb
 162              		.thumb_func
 163              		.fpu fpv4-sp-d16
 165              	OnRxTimeout:
 166              	.LFB147:
 710:Core/Src/app_sx126x.c **** 
 711:Core/Src/app_sx126x.c **** void OnRxTimeout( void )
 712:Core/Src/app_sx126x.c **** {
 167              		.loc 1 712 1 is_stmt 1 view -0
 168              		.cfi_startproc
 169              		@ args = 0, pretend = 0, frame = 0
 170              		@ frame_needed = 0, uses_anonymous_args = 0
 171 0000 08B5     		push	{r3, lr}
 172              	.LCFI3:
 173              		.cfi_def_cfa_offset 8
 174              		.cfi_offset 3, -8
 175              		.cfi_offset 14, -4
 713:Core/Src/app_sx126x.c **** #if 0
 714:Core/Src/app_sx126x.c ****     Radio.Sleep( );
 715:Core/Src/app_sx126x.c ****     State = RX_TIMEOUT;
 716:Core/Src/app_sx126x.c **** #endif
 717:Core/Src/app_sx126x.c **** 		 printf("Rx timeout\n");
 176              		.loc 1 717 4 view .LVU22
 177 0002 0448     		ldr	r0, .L15
 178 0004 FFF7FEFF 		bl	puts
 179              	.LVL7:
 718:Core/Src/app_sx126x.c **** 	 Radio.Rx(0);
 180              		.loc 1 718 3 view .LVU23
 181              		.loc 1 718 8 is_stmt 0 view .LVU24
 182 0008 034B     		ldr	r3, .L15+4
 183 000a 5B6B     		ldr	r3, [r3, #52]
 184              		.loc 1 718 3 view .LVU25
 185 000c 0020     		movs	r0, #0
 186 000e 9847     		blx	r3
 187              	.LVL8:
 719:Core/Src/app_sx126x.c **** }
 188              		.loc 1 719 1 view .LVU26
 189 0010 08BD     		pop	{r3, pc}
 190              	.L16:
 191 0012 00BF     		.align	2
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 17


 192              	.L15:
 193 0014 00000000 		.word	.LC0
 194 0018 00000000 		.word	Radio
 195              		.cfi_endproc
 196              	.LFE147:
 198              		.section	.rodata.OnRxError.str1.4,"aMS",%progbits,1
 199              		.align	2
 200              	.LC1:
 201 0000 52782065 		.ascii	"Rx error\000"
 201      72726F72 
 201      00
 202              		.section	.text.OnRxError,"ax",%progbits
 203              		.align	1
 204              		.global	OnRxError
 205              		.syntax unified
 206              		.thumb
 207              		.thumb_func
 208              		.fpu fpv4-sp-d16
 210              	OnRxError:
 211              	.LFB148:
 720:Core/Src/app_sx126x.c **** 
 721:Core/Src/app_sx126x.c **** void OnRxError( void )
 722:Core/Src/app_sx126x.c **** {
 212              		.loc 1 722 1 is_stmt 1 view -0
 213              		.cfi_startproc
 214              		@ args = 0, pretend = 0, frame = 0
 215              		@ frame_needed = 0, uses_anonymous_args = 0
 216 0000 08B5     		push	{r3, lr}
 217              	.LCFI4:
 218              		.cfi_def_cfa_offset 8
 219              		.cfi_offset 3, -8
 220              		.cfi_offset 14, -4
 723:Core/Src/app_sx126x.c **** #if 0
 724:Core/Src/app_sx126x.c ****     Radio.Sleep( );
 725:Core/Src/app_sx126x.c ****     State = RX_ERROR;
 726:Core/Src/app_sx126x.c **** #endif
 727:Core/Src/app_sx126x.c **** 	 printf("Rx error\n");
 221              		.loc 1 727 3 view .LVU28
 222 0002 0448     		ldr	r0, .L19
 223 0004 FFF7FEFF 		bl	puts
 224              	.LVL9:
 728:Core/Src/app_sx126x.c **** 	 Radio.Rx(0);
 225              		.loc 1 728 3 view .LVU29
 226              		.loc 1 728 8 is_stmt 0 view .LVU30
 227 0008 034B     		ldr	r3, .L19+4
 228 000a 5B6B     		ldr	r3, [r3, #52]
 229              		.loc 1 728 3 view .LVU31
 230 000c 0020     		movs	r0, #0
 231 000e 9847     		blx	r3
 232              	.LVL10:
 729:Core/Src/app_sx126x.c **** }
 233              		.loc 1 729 1 view .LVU32
 234 0010 08BD     		pop	{r3, pc}
 235              	.L20:
 236 0012 00BF     		.align	2
 237              	.L19:
 238 0014 00000000 		.word	.LC1
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 18


 239 0018 00000000 		.word	Radio
 240              		.cfi_endproc
 241              	.LFE148:
 243              		.section	.text.sx126x_init,"ax",%progbits
 244              		.align	1
 245              		.global	sx126x_init
 246              		.syntax unified
 247              		.thumb
 248              		.thumb_func
 249              		.fpu fpv4-sp-d16
 251              	sx126x_init:
 252              	.LFB136:
 171:Core/Src/app_sx126x.c **** bool isMaster = true;
 253              		.loc 1 171 1 is_stmt 1 view -0
 254              		.cfi_startproc
 255              		@ args = 0, pretend = 0, frame = 0
 256              		@ frame_needed = 0, uses_anonymous_args = 0
 257 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 258              	.LCFI5:
 259              		.cfi_def_cfa_offset 28
 260              		.cfi_offset 4, -28
 261              		.cfi_offset 5, -24
 262              		.cfi_offset 6, -20
 263              		.cfi_offset 7, -16
 264              		.cfi_offset 8, -12
 265              		.cfi_offset 9, -8
 266              		.cfi_offset 14, -4
 267 0004 8BB0     		sub	sp, sp, #44
 268              	.LCFI6:
 269              		.cfi_def_cfa_offset 72
 172:Core/Src/app_sx126x.c ****     uint8_t i;
 270              		.loc 1 172 1 view .LVU34
 271              	.LVL11:
 173:Core/Src/app_sx126x.c **** 
 272              		.loc 1 173 5 view .LVU35
 176:Core/Src/app_sx126x.c ****     BoardInitPeriph();
 273              		.loc 1 176 5 view .LVU36
 274 0006 FFF7FEFF 		bl	BoardInitMcu
 275              	.LVL12:
 177:Core/Src/app_sx126x.c **** 
 276              		.loc 1 177 5 view .LVU37
 277 000a FFF7FEFF 		bl	BoardInitPeriph
 278              	.LVL13:
 180:Core/Src/app_sx126x.c ****     TimerSetValue(&fsk_tst_timer, 20);
 279              		.loc 1 180 5 view .LVU38
 280 000e 284C     		ldr	r4, .L23
 281 0010 2849     		ldr	r1, .L23+4
 282 0012 2046     		mov	r0, r4
 283 0014 FFF7FEFF 		bl	TimerInit
 284              	.LVL14:
 181:Core/Src/app_sx126x.c **** 
 285              		.loc 1 181 5 view .LVU39
 286 0018 1421     		movs	r1, #20
 287 001a 2046     		mov	r0, r4
 288 001c FFF7FEFF 		bl	TimerSetValue
 289              	.LVL15:
 184:Core/Src/app_sx126x.c ****     RadioEvents.RxDone = OnRxDone;
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 19


 290              		.loc 1 184 5 view .LVU40
 184:Core/Src/app_sx126x.c ****     RadioEvents.RxDone = OnRxDone;
 291              		.loc 1 184 24 is_stmt 0 view .LVU41
 292 0020 2548     		ldr	r0, .L23+8
 293 0022 264B     		ldr	r3, .L23+12
 294 0024 0360     		str	r3, [r0]
 185:Core/Src/app_sx126x.c ****     RadioEvents.TxTimeout = OnTxTimeout;
 295              		.loc 1 185 5 is_stmt 1 view .LVU42
 185:Core/Src/app_sx126x.c ****     RadioEvents.TxTimeout = OnTxTimeout;
 296              		.loc 1 185 24 is_stmt 0 view .LVU43
 297 0026 264B     		ldr	r3, .L23+16
 298 0028 8360     		str	r3, [r0, #8]
 186:Core/Src/app_sx126x.c ****     RadioEvents.RxTimeout = OnRxTimeout;
 299              		.loc 1 186 5 is_stmt 1 view .LVU44
 186:Core/Src/app_sx126x.c ****     RadioEvents.RxTimeout = OnRxTimeout;
 300              		.loc 1 186 27 is_stmt 0 view .LVU45
 301 002a 264B     		ldr	r3, .L23+20
 302 002c 4360     		str	r3, [r0, #4]
 187:Core/Src/app_sx126x.c ****     RadioEvents.RxError = OnRxError;
 303              		.loc 1 187 5 is_stmt 1 view .LVU46
 187:Core/Src/app_sx126x.c ****     RadioEvents.RxError = OnRxError;
 304              		.loc 1 187 27 is_stmt 0 view .LVU47
 305 002e 264B     		ldr	r3, .L23+24
 306 0030 C360     		str	r3, [r0, #12]
 188:Core/Src/app_sx126x.c **** 
 307              		.loc 1 188 5 is_stmt 1 view .LVU48
 188:Core/Src/app_sx126x.c **** 
 308              		.loc 1 188 25 is_stmt 0 view .LVU49
 309 0032 264B     		ldr	r3, .L23+28
 310 0034 0361     		str	r3, [r0, #16]
 190:Core/Src/app_sx126x.c **** 
 311              		.loc 1 190 5 is_stmt 1 view .LVU50
 190:Core/Src/app_sx126x.c **** 
 312              		.loc 1 190 10 is_stmt 0 view .LVU51
 313 0036 264D     		ldr	r5, .L23+32
 314 0038 2B68     		ldr	r3, [r5]
 190:Core/Src/app_sx126x.c **** 
 315              		.loc 1 190 5 view .LVU52
 316 003a 9847     		blx	r3
 317              	.LVL16:
 192:Core/Src/app_sx126x.c **** 
 318              		.loc 1 192 5 is_stmt 1 view .LVU53
 192:Core/Src/app_sx126x.c **** 
 319              		.loc 1 192 10 is_stmt 0 view .LVU54
 320 003c EB68     		ldr	r3, [r5, #12]
 192:Core/Src/app_sx126x.c **** 
 321              		.loc 1 192 5 view .LVU55
 322 003e 2548     		ldr	r0, .L23+36
 323 0040 9847     		blx	r3
 324              	.LVL17:
 208:Core/Src/app_sx126x.c ****                       FSK_DATARATE, 0,
 325              		.loc 1 208 5 is_stmt 1 view .LVU56
 326 0042 40F6B833 		movw	r3, #3000
 327 0046 0893     		str	r3, [sp, #32]
 328 0048 0024     		movs	r4, #0
 329 004a 0794     		str	r4, [sp, #28]
 330 004c 0694     		str	r4, [sp, #24]
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 20


 331 004e 0594     		str	r4, [sp, #20]
 332 0050 0126     		movs	r6, #1
 333 0052 0496     		str	r6, [sp, #16]
 334 0054 0396     		str	r6, [sp, #12]
 335 0056 4FF00208 		mov	r8, #2
 336 005a CDF80880 		str	r8, [sp, #8]
 337 005e 0194     		str	r4, [sp, #4]
 338 0060 4FF41669 		mov	r9, #2400
 339 0064 CDF80090 		str	r9, [sp]
 340 0068 2346     		mov	r3, r4
 341 006a 44F62062 		movw	r2, #20000
 342 006e 0E21     		movs	r1, #14
 343 0070 2046     		mov	r0, r4
 344 0072 EF69     		ldr	r7, [r5, #28]
 345 0074 B847     		blx	r7
 346              	.LVL18:
 218:Core/Src/app_sx126x.c ****                       0, FSK_AFC_BANDWIDTH, FSK_PREAMBLE_LENGTH,
 347              		.loc 1 218 5 view .LVU57
 348 0076 0996     		str	r6, [sp, #36]
 349 0078 0894     		str	r4, [sp, #32]
 350 007a 0794     		str	r4, [sp, #28]
 351 007c 0694     		str	r4, [sp, #24]
 352 007e 0594     		str	r4, [sp, #20]
 353 0080 0A23     		movs	r3, #10
 354 0082 0493     		str	r3, [sp, #16]
 355 0084 0396     		str	r6, [sp, #12]
 356 0086 0294     		str	r4, [sp, #8]
 357 0088 CDF80480 		str	r8, [sp, #4]
 358 008c 124B     		ldr	r3, .L23+40
 359 008e 0093     		str	r3, [sp]
 360 0090 2346     		mov	r3, r4
 361 0092 4A46     		mov	r2, r9
 362 0094 4CF25031 		movw	r1, #50000
 363 0098 2046     		mov	r0, r4
 364 009a AE69     		ldr	r6, [r5, #24]
 365 009c B047     		blx	r6
 366              	.LVL19:
 222:Core/Src/app_sx126x.c ****     //fsk_state = FSK_TEST_START;
 367              		.loc 1 222 5 view .LVU58
 222:Core/Src/app_sx126x.c ****     //fsk_state = FSK_TEST_START;
 368              		.loc 1 222 10 is_stmt 0 view .LVU59
 369 009e 6B6E     		ldr	r3, [r5, #100]
 222:Core/Src/app_sx126x.c ****     //fsk_state = FSK_TEST_START;
 370              		.loc 1 222 5 view .LVU60
 371 00a0 2046     		mov	r0, r4
 372 00a2 9847     		blx	r3
 373              	.LVL20:
 225:Core/Src/app_sx126x.c **** 
 374              		.loc 1 225 5 is_stmt 1 view .LVU61
 375 00a4 FFF7FEFF 		bl	GenTriggerPulse
 376              	.LVL21:
 253:Core/Src/app_sx126x.c **** /**
 377              		.loc 1 253 1 is_stmt 0 view .LVU62
 378 00a8 0BB0     		add	sp, sp, #44
 379              	.LCFI7:
 380              		.cfi_def_cfa_offset 28
 381              		@ sp needed
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 21


 382 00aa BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 383              	.L24:
 384 00ae 00BF     		.align	2
 385              	.L23:
 386 00b0 00000000 		.word	.LANCHOR1
 387 00b4 00000000 		.word	GenTriggerPulse
 388 00b8 00000000 		.word	.LANCHOR2
 389 00bc 00000000 		.word	OnTxDone
 390 00c0 00000000 		.word	OnRxDone
 391 00c4 00000000 		.word	OnTxTimeout
 392 00c8 00000000 		.word	OnRxTimeout
 393 00cc 00000000 		.word	OnRxError
 394 00d0 00000000 		.word	Radio
 395 00d4 C0780233 		.word	855800000
 396 00d8 85450100 		.word	83333
 397              		.cfi_endproc
 398              	.LFE136:
 400              		.section	.rodata.sx126x_rx_packet.str1.4,"aMS",%progbits,1
 401              		.align	2
 402              	.LC2:
 403 0000 23545354 		.ascii	"#TST_Start\000"
 403      5F537461 
 403      727400
 404              		.section	.text.sx126x_rx_packet,"ax",%progbits
 405              		.align	1
 406              		.global	sx126x_rx_packet
 407              		.syntax unified
 408              		.thumb
 409              		.thumb_func
 410              		.fpu fpv4-sp-d16
 412              	sx126x_rx_packet:
 413              	.LFB138:
 328:Core/Src/app_sx126x.c ****     printf("#TST_Start\n");
 414              		.loc 1 328 1 is_stmt 1 view -0
 415              		.cfi_startproc
 416              		@ Volatile: function does not return.
 417              		@ args = 0, pretend = 0, frame = 0
 418              		@ frame_needed = 0, uses_anonymous_args = 0
 419 0000 08B5     		push	{r3, lr}
 420              	.LCFI8:
 421              		.cfi_def_cfa_offset 8
 422              		.cfi_offset 3, -8
 423              		.cfi_offset 14, -4
 329:Core/Src/app_sx126x.c ****     while (1)
 424              		.loc 1 329 5 view .LVU64
 425 0002 0348     		ldr	r0, .L28
 426 0004 FFF7FEFF 		bl	puts
 427              	.LVL22:
 428              	.L26:
 330:Core/Src/app_sx126x.c ****     {
 429              		.loc 1 330 5 discriminator 1 view .LVU65
 333:Core/Src/app_sx126x.c ****     }
 430              		.loc 1 333 9 discriminator 1 view .LVU66
 333:Core/Src/app_sx126x.c ****     }
 431              		.loc 1 333 14 is_stmt 0 discriminator 1 view .LVU67
 432 0008 024B     		ldr	r3, .L28+4
 433 000a 1B6E     		ldr	r3, [r3, #96]
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 22


 333:Core/Src/app_sx126x.c ****     }
 434              		.loc 1 333 9 discriminator 1 view .LVU68
 435 000c 9847     		blx	r3
 436              	.LVL23:
 330:Core/Src/app_sx126x.c ****     {
 437              		.loc 1 330 11 is_stmt 1 discriminator 1 view .LVU69
 438 000e FBE7     		b	.L26
 439              	.L29:
 440              		.align	2
 441              	.L28:
 442 0010 00000000 		.word	.LC2
 443 0014 00000000 		.word	Radio
 444              		.cfi_endproc
 445              	.LFE138:
 447              		.section	.rodata.register_test.str1.4,"aMS",%progbits,1
 448              		.align	2
 449              	.LC3:
 450 0000 72656769 		.ascii	"register write and read test\000"
 450      73746572 
 450      20777269 
 450      74652061 
 450      6E642072 
 451 001d 000000   		.align	2
 452              	.LC4:
 453 0020 74686520 		.ascii	"the sync 0 is 0x%02x\012\000"
 453      73796E63 
 453      20302069 
 453      73203078 
 453      25303278 
 454 0036 0000     		.align	2
 455              	.LC5:
 456 0038 74686520 		.ascii	"the sync 1 is 0x%02x\012\000"
 456      73796E63 
 456      20312069 
 456      73203078 
 456      25303278 
 457 004e 0000     		.align	2
 458              	.LC6:
 459 0050 74686520 		.ascii	"the sync 2 is 0x%02x\012\000"
 459      73796E63 
 459      20322069 
 459      73203078 
 459      25303278 
 460 0066 0000     		.align	2
 461              	.LC7:
 462 0068 74686520 		.ascii	"the sync 3 is 0x%02x\012\000"
 462      73796E63 
 462      20332069 
 462      73203078 
 462      25303278 
 463              		.section	.text.register_test,"ax",%progbits
 464              		.align	1
 465              		.global	register_test
 466              		.syntax unified
 467              		.thumb
 468              		.thumb_func
 469              		.fpu fpv4-sp-d16
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 23


 471              	register_test:
 472              	.LFB139:
 341:Core/Src/app_sx126x.c ****     //write register
 473              		.loc 1 341 1 view -0
 474              		.cfi_startproc
 475              		@ args = 0, pretend = 0, frame = 24
 476              		@ frame_needed = 0, uses_anonymous_args = 0
 477 0000 00B5     		push	{lr}
 478              	.LCFI9:
 479              		.cfi_def_cfa_offset 4
 480              		.cfi_offset 14, -4
 481 0002 87B0     		sub	sp, sp, #28
 482              	.LCFI10:
 483              		.cfi_def_cfa_offset 32
 343:Core/Src/app_sx126x.c ****     int a;
 484              		.loc 1 343 5 view .LVU71
 344:Core/Src/app_sx126x.c ****     printf("register write and read test\n");
 485              		.loc 1 344 5 view .LVU72
 345:Core/Src/app_sx126x.c ****     SX126xWriteRegister(0x06C0, 0x12);
 486              		.loc 1 345 5 view .LVU73
 487 0004 2448     		ldr	r0, .L32
 488 0006 FFF7FEFF 		bl	puts
 489              	.LVL24:
 346:Core/Src/app_sx126x.c ****     SX126xWriteRegister(0x06C1, 0x34);
 490              		.loc 1 346 5 view .LVU74
 491 000a 1221     		movs	r1, #18
 492 000c 4FF4D860 		mov	r0, #1728
 493 0010 FFF7FEFF 		bl	SX126xWriteRegister
 494              	.LVL25:
 347:Core/Src/app_sx126x.c ****     SX126xWriteRegister(0x06C2, 0x56);
 495              		.loc 1 347 5 view .LVU75
 496 0014 3421     		movs	r1, #52
 497 0016 40F2C160 		movw	r0, #1729
 498 001a FFF7FEFF 		bl	SX126xWriteRegister
 499              	.LVL26:
 348:Core/Src/app_sx126x.c ****     SX126xWriteRegister(0x06C3, 0x78);
 500              		.loc 1 348 5 view .LVU76
 501 001e 5621     		movs	r1, #86
 502 0020 40F2C260 		movw	r0, #1730
 503 0024 FFF7FEFF 		bl	SX126xWriteRegister
 504              	.LVL27:
 349:Core/Src/app_sx126x.c **** 
 505              		.loc 1 349 5 view .LVU77
 506 0028 7821     		movs	r1, #120
 507 002a 40F2C360 		movw	r0, #1731
 508 002e FFF7FEFF 		bl	SX126xWriteRegister
 509              	.LVL28:
 351:Core/Src/app_sx126x.c ****     sprintf(xx,"the sync 0 is 0x%02x\n",a);
 510              		.loc 1 351 5 view .LVU78
 351:Core/Src/app_sx126x.c ****     sprintf(xx,"the sync 0 is 0x%02x\n",a);
 511              		.loc 1 351 7 is_stmt 0 view .LVU79
 512 0032 4FF4D860 		mov	r0, #1728
 513 0036 FFF7FEFF 		bl	SX126xReadRegister
 514              	.LVL29:
 515 003a 0246     		mov	r2, r0
 516              	.LVL30:
 352:Core/Src/app_sx126x.c ****     printf(xx);
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 24


 517              		.loc 1 352 5 is_stmt 1 view .LVU80
 518 003c 1749     		ldr	r1, .L32+4
 519 003e 01A8     		add	r0, sp, #4
 520              	.LVL31:
 352:Core/Src/app_sx126x.c ****     printf(xx);
 521              		.loc 1 352 5 is_stmt 0 view .LVU81
 522 0040 FFF7FEFF 		bl	sprintf
 523              	.LVL32:
 353:Core/Src/app_sx126x.c **** 
 524              		.loc 1 353 5 is_stmt 1 view .LVU82
 525 0044 01A8     		add	r0, sp, #4
 526 0046 FFF7FEFF 		bl	printf
 527              	.LVL33:
 355:Core/Src/app_sx126x.c ****     sprintf(xx,"the sync 1 is 0x%02x\n",a);
 528              		.loc 1 355 5 view .LVU83
 355:Core/Src/app_sx126x.c ****     sprintf(xx,"the sync 1 is 0x%02x\n",a);
 529              		.loc 1 355 7 is_stmt 0 view .LVU84
 530 004a 40F2C160 		movw	r0, #1729
 531 004e FFF7FEFF 		bl	SX126xReadRegister
 532              	.LVL34:
 533 0052 0246     		mov	r2, r0
 534              	.LVL35:
 356:Core/Src/app_sx126x.c ****     printf(xx);
 535              		.loc 1 356 5 is_stmt 1 view .LVU85
 536 0054 1249     		ldr	r1, .L32+8
 537 0056 01A8     		add	r0, sp, #4
 538              	.LVL36:
 356:Core/Src/app_sx126x.c ****     printf(xx);
 539              		.loc 1 356 5 is_stmt 0 view .LVU86
 540 0058 FFF7FEFF 		bl	sprintf
 541              	.LVL37:
 357:Core/Src/app_sx126x.c **** 
 542              		.loc 1 357 5 is_stmt 1 view .LVU87
 543 005c 01A8     		add	r0, sp, #4
 544 005e FFF7FEFF 		bl	printf
 545              	.LVL38:
 359:Core/Src/app_sx126x.c ****     sprintf(xx,"the sync 2 is 0x%02x\n",a);
 546              		.loc 1 359 5 view .LVU88
 359:Core/Src/app_sx126x.c ****     sprintf(xx,"the sync 2 is 0x%02x\n",a);
 547              		.loc 1 359 7 is_stmt 0 view .LVU89
 548 0062 40F2C260 		movw	r0, #1730
 549 0066 FFF7FEFF 		bl	SX126xReadRegister
 550              	.LVL39:
 551 006a 0246     		mov	r2, r0
 552              	.LVL40:
 360:Core/Src/app_sx126x.c ****     printf(xx);
 553              		.loc 1 360 5 is_stmt 1 view .LVU90
 554 006c 0D49     		ldr	r1, .L32+12
 555 006e 01A8     		add	r0, sp, #4
 556              	.LVL41:
 360:Core/Src/app_sx126x.c ****     printf(xx);
 557              		.loc 1 360 5 is_stmt 0 view .LVU91
 558 0070 FFF7FEFF 		bl	sprintf
 559              	.LVL42:
 361:Core/Src/app_sx126x.c **** 
 560              		.loc 1 361 5 is_stmt 1 view .LVU92
 561 0074 01A8     		add	r0, sp, #4
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 25


 562 0076 FFF7FEFF 		bl	printf
 563              	.LVL43:
 363:Core/Src/app_sx126x.c ****     sprintf(xx,"the sync 3 is 0x%02x\n",a);
 564              		.loc 1 363 5 view .LVU93
 363:Core/Src/app_sx126x.c ****     sprintf(xx,"the sync 3 is 0x%02x\n",a);
 565              		.loc 1 363 7 is_stmt 0 view .LVU94
 566 007a 40F2C360 		movw	r0, #1731
 567 007e FFF7FEFF 		bl	SX126xReadRegister
 568              	.LVL44:
 569 0082 0246     		mov	r2, r0
 570              	.LVL45:
 364:Core/Src/app_sx126x.c ****     printf(xx);
 571              		.loc 1 364 5 is_stmt 1 view .LVU95
 572 0084 0849     		ldr	r1, .L32+16
 573 0086 01A8     		add	r0, sp, #4
 574              	.LVL46:
 364:Core/Src/app_sx126x.c ****     printf(xx);
 575              		.loc 1 364 5 is_stmt 0 view .LVU96
 576 0088 FFF7FEFF 		bl	sprintf
 577              	.LVL47:
 365:Core/Src/app_sx126x.c **** }
 578              		.loc 1 365 5 is_stmt 1 view .LVU97
 579 008c 01A8     		add	r0, sp, #4
 580 008e FFF7FEFF 		bl	printf
 581              	.LVL48:
 366:Core/Src/app_sx126x.c **** 
 582              		.loc 1 366 1 is_stmt 0 view .LVU98
 583 0092 07B0     		add	sp, sp, #28
 584              	.LCFI11:
 585              		.cfi_def_cfa_offset 4
 586              		@ sp needed
 587 0094 5DF804FB 		ldr	pc, [sp], #4
 588              	.L33:
 589              		.align	2
 590              	.L32:
 591 0098 00000000 		.word	.LC3
 592 009c 20000000 		.word	.LC4
 593 00a0 38000000 		.word	.LC5
 594 00a4 50000000 		.word	.LC6
 595 00a8 68000000 		.word	.LC7
 596              		.cfi_endproc
 597              	.LFE139:
 599              		.section	.rodata.packet_rx.str1.4,"aMS",%progbits,1
 600              		.align	2
 601              	.LC8:
 602 0000 72656365 		.ascii	"receive packet successfully\000"
 602      69766520 
 602      7061636B 
 602      65742073 
 602      75636365 
 603              		.align	2
 604              	.LC9:
 605 001c 74686520 		.ascii	"the receive length is %d\012\000"
 605      72656365 
 605      69766520 
 605      6C656E67 
 605      74682069 
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 26


 606 0036 0000     		.align	2
 607              	.LC10:
 608 0038 30782530 		.ascii	"0x%02x ,\000"
 608      3278202C 
 608      00
 609 0041 000000   		.align	2
 610              	.LC11:
 611 0044 74686520 		.ascii	"the rssi is %d\012\000"
 611      72737369 
 611      20697320 
 611      25640A00 
 612              		.align	2
 613              	.LC12:
 614 0054 72656365 		.ascii	"receive timeout\000"
 614      69766520 
 614      74696D65 
 614      6F757400 
 615              		.section	.text.packet_rx,"ax",%progbits
 616              		.align	1
 617              		.global	packet_rx
 618              		.syntax unified
 619              		.thumb
 620              		.thumb_func
 621              		.fpu fpv4-sp-d16
 623              	packet_rx:
 624              	.LFB140:
 373:Core/Src/app_sx126x.c ****     int i;
 625              		.loc 1 373 1 is_stmt 1 view -0
 626              		.cfi_startproc
 627              		@ args = 0, pretend = 0, frame = 280
 628              		@ frame_needed = 0, uses_anonymous_args = 0
 629 0000 10B5     		push	{r4, lr}
 630              	.LCFI12:
 631              		.cfi_def_cfa_offset 8
 632              		.cfi_offset 4, -8
 633              		.cfi_offset 14, -4
 634 0002 C6B0     		sub	sp, sp, #280
 635              	.LCFI13:
 636              		.cfi_def_cfa_offset 288
 374:Core/Src/app_sx126x.c ****     uint16_t irqRegs = SX126xGetIrqStatus();
 637              		.loc 1 374 5 view .LVU100
 375:Core/Src/app_sx126x.c ****     uint8_t rxbuf[255];
 638              		.loc 1 375 5 view .LVU101
 375:Core/Src/app_sx126x.c ****     uint8_t rxbuf[255];
 639              		.loc 1 375 24 is_stmt 0 view .LVU102
 640 0004 FFF7FEFF 		bl	SX126xGetIrqStatus
 641              	.LVL49:
 376:Core/Src/app_sx126x.c ****     
 642              		.loc 1 376 5 is_stmt 1 view .LVU103
 378:Core/Src/app_sx126x.c ****     PacketStatus_t radiopkstatus;
 643              		.loc 1 378 5 view .LVU104
 378:Core/Src/app_sx126x.c ****     PacketStatus_t radiopkstatus;
 644              		.loc 1 378 13 is_stmt 0 view .LVU105
 645 0008 0024     		movs	r4, #0
 646 000a 8DF81740 		strb	r4, [sp, #23]
 379:Core/Src/app_sx126x.c ****     SX126xClearIrqStatus(irqRegs);
 647              		.loc 1 379 5 is_stmt 1 view .LVU106
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 27


 380:Core/Src/app_sx126x.c ****     // Radio.Rx(0);
 648              		.loc 1 380 5 view .LVU107
 649 000e FFF7FEFF 		bl	SX126xClearIrqStatus
 650              	.LVL50:
 382:Core/Src/app_sx126x.c ****     i=0;
 651              		.loc 1 382 5 view .LVU108
 382:Core/Src/app_sx126x.c ****     i=0;
 652              		.loc 1 382 10 is_stmt 0 view .LVU109
 653 0012 214B     		ldr	r3, .L42
 654 0014 5B6E     		ldr	r3, [r3, #100]
 382:Core/Src/app_sx126x.c ****     i=0;
 655              		.loc 1 382 5 view .LVU110
 656 0016 2046     		mov	r0, r4
 657 0018 9847     		blx	r3
 658              	.LVL51:
 383:Core/Src/app_sx126x.c ****     while (1)
 659              		.loc 1 383 5 is_stmt 1 view .LVU111
 660              	.L39:
 384:Core/Src/app_sx126x.c ****     {
 661              		.loc 1 384 5 view .LVU112
 386:Core/Src/app_sx126x.c **** 
 662              		.loc 1 386 9 view .LVU113
 386:Core/Src/app_sx126x.c **** 
 663              		.loc 1 386 19 is_stmt 0 view .LVU114
 664 001a FFF7FEFF 		bl	SX126xGetIrqStatus
 665              	.LVL52:
 389:Core/Src/app_sx126x.c ****         {
 666              		.loc 1 389 9 is_stmt 1 view .LVU115
 389:Core/Src/app_sx126x.c ****         {
 667              		.loc 1 389 11 is_stmt 0 view .LVU116
 668 001e 10F0020F 		tst	r0, #2
 669 0022 09D1     		bne	.L41
 414:Core/Src/app_sx126x.c ****             HAL_Delay(1);
 670              		.loc 1 414 13 is_stmt 1 view .LVU117
 414:Core/Src/app_sx126x.c ****             HAL_Delay(1);
 671              		.loc 1 414 14 is_stmt 0 view .LVU118
 672 0024 0134     		adds	r4, r4, #1
 673              	.LVL53:
 415:Core/Src/app_sx126x.c ****             if(i>=100)
 674              		.loc 1 415 13 is_stmt 1 view .LVU119
 675 0026 0120     		movs	r0, #1
 676              	.LVL54:
 415:Core/Src/app_sx126x.c ****             if(i>=100)
 677              		.loc 1 415 13 is_stmt 0 view .LVU120
 678 0028 FFF7FEFF 		bl	HAL_Delay
 679              	.LVL55:
 416:Core/Src/app_sx126x.c ****             {
 680              		.loc 1 416 13 is_stmt 1 view .LVU121
 416:Core/Src/app_sx126x.c ****             {
 681              		.loc 1 416 15 is_stmt 0 view .LVU122
 682 002c 632C     		cmp	r4, #99
 683 002e F4DD     		ble	.L39
 418:Core/Src/app_sx126x.c ****                 break;
 684              		.loc 1 418 17 is_stmt 1 view .LVU123
 685 0030 1A48     		ldr	r0, .L42+4
 686 0032 FFF7FEFF 		bl	puts
 687              	.LVL56:
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 28


 419:Core/Src/app_sx126x.c ****             }
 688              		.loc 1 419 17 view .LVU124
 689 0036 27E0     		b	.L38
 690              	.LVL57:
 691              	.L41:
 391:Core/Src/app_sx126x.c ****             GpioToggle(&Led2);
 692              		.loc 1 391 13 view .LVU125
 693 0038 1948     		ldr	r0, .L42+8
 694              	.LVL58:
 391:Core/Src/app_sx126x.c ****             GpioToggle(&Led2);
 695              		.loc 1 391 13 is_stmt 0 view .LVU126
 696 003a FFF7FEFF 		bl	puts
 697              	.LVL59:
 392:Core/Src/app_sx126x.c **** 
 698              		.loc 1 392 13 is_stmt 1 view .LVU127
 699 003e 1948     		ldr	r0, .L42+12
 700 0040 FFF7FEFF 		bl	GpioToggle
 701              	.LVL60:
 394:Core/Src/app_sx126x.c ****             printf("the receive length is %d\n",size);
 702              		.loc 1 394 13 view .LVU128
 703 0044 FF22     		movs	r2, #255
 704 0046 0DF11701 		add	r1, sp, #23
 705 004a 06A8     		add	r0, sp, #24
 706 004c FFF7FEFF 		bl	SX126xGetPayload
 707              	.LVL61:
 395:Core/Src/app_sx126x.c ****             // size=20;
 708              		.loc 1 395 13 view .LVU129
 709 0050 9DF81710 		ldrb	r1, [sp, #23]	@ zero_extendqisi2
 710 0054 1448     		ldr	r0, .L42+16
 711 0056 FFF7FEFF 		bl	printf
 712              	.LVL62:
 397:Core/Src/app_sx126x.c ****             {
 713              		.loc 1 397 13 view .LVU130
 397:Core/Src/app_sx126x.c ****             {
 714              		.loc 1 397 20 is_stmt 0 view .LVU131
 715 005a 0024     		movs	r4, #0
 397:Core/Src/app_sx126x.c ****             {
 716              		.loc 1 397 13 view .LVU132
 717 005c 05E0     		b	.L36
 718              	.LVL63:
 719              	.L37:
 400:Core/Src/app_sx126x.c ****                 // printf("%c ",rxbuf[i]);
 720              		.loc 1 400 17 is_stmt 1 discriminator 3 view .LVU133
 721 005e 06AB     		add	r3, sp, #24
 722 0060 195D     		ldrb	r1, [r3, r4]	@ zero_extendqisi2
 723 0062 1248     		ldr	r0, .L42+20
 724 0064 FFF7FEFF 		bl	printf
 725              	.LVL64:
 397:Core/Src/app_sx126x.c ****             {
 726              		.loc 1 397 35 discriminator 3 view .LVU134
 397:Core/Src/app_sx126x.c ****             {
 727              		.loc 1 397 36 is_stmt 0 discriminator 3 view .LVU135
 728 0068 0134     		adds	r4, r4, #1
 729              	.LVL65:
 730              	.L36:
 397:Core/Src/app_sx126x.c ****             {
 731              		.loc 1 397 25 is_stmt 1 discriminator 1 view .LVU136
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 29


 397:Core/Src/app_sx126x.c ****             {
 732              		.loc 1 397 27 is_stmt 0 discriminator 1 view .LVU137
 733 006a 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 397:Core/Src/app_sx126x.c ****             {
 734              		.loc 1 397 13 discriminator 1 view .LVU138
 735 006e A342     		cmp	r3, r4
 736 0070 F5DC     		bgt	.L37
 406:Core/Src/app_sx126x.c ****             SX126xGetPacketStatus(&radiopkstatus);
 737              		.loc 1 406 13 is_stmt 1 view .LVU139
 738 0072 0A20     		movs	r0, #10
 739 0074 FFF7FEFF 		bl	putchar
 740              	.LVL66:
 407:Core/Src/app_sx126x.c ****             printf("the rssi is %d\n", radiopkstatus.Params.Gfsk.RssiAvg);
 741              		.loc 1 407 13 view .LVU140
 742 0078 6846     		mov	r0, sp
 743 007a FFF7FEFF 		bl	SX126xGetPacketStatus
 744              	.LVL67:
 408:Core/Src/app_sx126x.c **** 
 745              		.loc 1 408 13 view .LVU141
 746 007e 9DF90510 		ldrsb	r1, [sp, #5]
 747 0082 0B48     		ldr	r0, .L42+24
 748 0084 FFF7FEFF 		bl	printf
 749              	.LVL68:
 410:Core/Src/app_sx126x.c ****         }
 750              		.loc 1 410 13 view .LVU142
 751              	.L38:
 423:Core/Src/app_sx126x.c ****     HAL_Delay(10);
 752              		.loc 1 423 5 view .LVU143
 423:Core/Src/app_sx126x.c ****     HAL_Delay(10);
 753              		.loc 1 423 10 is_stmt 0 view .LVU144
 754 0088 034B     		ldr	r3, .L42
 755 008a 1B6B     		ldr	r3, [r3, #48]
 423:Core/Src/app_sx126x.c ****     HAL_Delay(10);
 756              		.loc 1 423 5 view .LVU145
 757 008c 9847     		blx	r3
 758              	.LVL69:
 424:Core/Src/app_sx126x.c **** }
 759              		.loc 1 424 5 is_stmt 1 view .LVU146
 760 008e 0A20     		movs	r0, #10
 761 0090 FFF7FEFF 		bl	HAL_Delay
 762              	.LVL70:
 425:Core/Src/app_sx126x.c **** 
 763              		.loc 1 425 1 is_stmt 0 view .LVU147
 764 0094 46B0     		add	sp, sp, #280
 765              	.LCFI14:
 766              		.cfi_def_cfa_offset 8
 767              		@ sp needed
 768 0096 10BD     		pop	{r4, pc}
 769              	.LVL71:
 770              	.L43:
 425:Core/Src/app_sx126x.c **** 
 771              		.loc 1 425 1 view .LVU148
 772              		.align	2
 773              	.L42:
 774 0098 00000000 		.word	Radio
 775 009c 54000000 		.word	.LC12
 776 00a0 00000000 		.word	.LC8
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 30


 777 00a4 00000000 		.word	Led2
 778 00a8 1C000000 		.word	.LC9
 779 00ac 38000000 		.word	.LC10
 780 00b0 44000000 		.word	.LC11
 781              		.cfi_endproc
 782              	.LFE140:
 784              		.section	.text.crc16,"ax",%progbits
 785              		.align	1
 786              		.global	crc16
 787              		.syntax unified
 788              		.thumb
 789              		.thumb_func
 790              		.fpu fpv4-sp-d16
 792              	crc16:
 793              	.LVL72:
 794              	.LFB141:
 436:Core/Src/app_sx126x.c ****   int j;
 795              		.loc 1 436 1 is_stmt 1 view -0
 796              		.cfi_startproc
 797              		@ args = 0, pretend = 0, frame = 0
 798              		@ frame_needed = 0, uses_anonymous_args = 0
 799              		@ link register save eliminated.
 436:Core/Src/app_sx126x.c ****   int j;
 800              		.loc 1 436 1 is_stmt 0 view .LVU150
 801 0000 8446     		mov	ip, r0
 437:Core/Src/app_sx126x.c ****   // unsigned int reg_crc = 0xFFFF;
 802              		.loc 1 437 3 is_stmt 1 view .LVU151
 439:Core/Src/app_sx126x.c ****   // unsigned int reg_crc = 0x4230;
 803              		.loc 1 439 3 view .LVU152
 804              	.LVL73:
 441:Core/Src/app_sx126x.c ****   {
 805              		.loc 1 441 3 view .LVU153
 439:Core/Src/app_sx126x.c ****   // unsigned int reg_crc = 0x4230;
 806              		.loc 1 439 16 is_stmt 0 view .LVU154
 807 0002 0023     		movs	r3, #0
 808              	.LVL74:
 809              	.L45:
 441:Core/Src/app_sx126x.c ****   {
 810              		.loc 1 441 9 is_stmt 1 view .LVU155
 811 0004 0A46     		mov	r2, r1
 441:Core/Src/app_sx126x.c ****   {
 812              		.loc 1 441 16 is_stmt 0 view .LVU156
 813 0006 0139     		subs	r1, r1, #1
 814              	.LVL75:
 441:Core/Src/app_sx126x.c ****   {
 815              		.loc 1 441 16 view .LVU157
 816 0008 C9B2     		uxtb	r1, r1
 817              	.LVL76:
 441:Core/Src/app_sx126x.c ****   {
 818              		.loc 1 441 9 view .LVU158
 819 000a 8AB1     		cbz	r2, .L51
 444:Core/Src/app_sx126x.c ****     for (j = 0; j < 8; j++)
 820              		.loc 1 444 5 is_stmt 1 view .LVU159
 821              	.LVL77:
 444:Core/Src/app_sx126x.c ****     for (j = 0; j < 8; j++)
 822              		.loc 1 444 17 is_stmt 0 view .LVU160
 823 000c 1CF8012B 		ldrb	r2, [ip], #1	@ zero_extendqisi2
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 31


 824              	.LVL78:
 444:Core/Src/app_sx126x.c ****     for (j = 0; j < 8; j++)
 825              		.loc 1 444 13 view .LVU161
 826 0010 83EA0223 		eor	r3, r3, r2, lsl #8
 827              	.LVL79:
 445:Core/Src/app_sx126x.c ****     {
 828              		.loc 1 445 5 is_stmt 1 view .LVU162
 445:Core/Src/app_sx126x.c ****     {
 829              		.loc 1 445 12 is_stmt 0 view .LVU163
 830 0014 0022     		movs	r2, #0
 445:Core/Src/app_sx126x.c ****     {
 831              		.loc 1 445 5 view .LVU164
 832 0016 01E0     		b	.L46
 833              	.LVL80:
 834              	.L47:
 454:Core/Src/app_sx126x.c ****       }
 835              		.loc 1 454 9 is_stmt 1 view .LVU165
 454:Core/Src/app_sx126x.c ****       }
 836              		.loc 1 454 17 is_stmt 0 view .LVU166
 837 0018 5B00     		lsls	r3, r3, #1
 838              	.LVL81:
 839              	.L48:
 445:Core/Src/app_sx126x.c ****     {
 840              		.loc 1 445 24 is_stmt 1 discriminator 2 view .LVU167
 445:Core/Src/app_sx126x.c ****     {
 841              		.loc 1 445 25 is_stmt 0 discriminator 2 view .LVU168
 842 001a 0132     		adds	r2, r2, #1
 843              	.LVL82:
 844              	.L46:
 445:Core/Src/app_sx126x.c ****     {
 845              		.loc 1 445 17 is_stmt 1 discriminator 1 view .LVU169
 445:Core/Src/app_sx126x.c ****     {
 846              		.loc 1 445 5 is_stmt 0 discriminator 1 view .LVU170
 847 001c 072A     		cmp	r2, #7
 848 001e F1DC     		bgt	.L45
 447:Core/Src/app_sx126x.c ****       {
 849              		.loc 1 447 7 is_stmt 1 view .LVU171
 447:Core/Src/app_sx126x.c ****       {
 850              		.loc 1 447 10 is_stmt 0 view .LVU172
 851 0020 13F4004F 		tst	r3, #32768
 852 0024 F8D0     		beq	.L47
 450:Core/Src/app_sx126x.c ****       }
 853              		.loc 1 450 9 is_stmt 1 view .LVU173
 450:Core/Src/app_sx126x.c ****       }
 854              		.loc 1 450 17 is_stmt 0 view .LVU174
 855 0026 48F20500 		movw	r0, #32773
 856 002a 80EA4303 		eor	r3, r0, r3, lsl #1
 857              	.LVL83:
 450:Core/Src/app_sx126x.c ****       }
 858              		.loc 1 450 17 view .LVU175
 859 002e F4E7     		b	.L48
 860              	.LVL84:
 861              	.L51:
 458:Core/Src/app_sx126x.c ****   return reg_crc;
 862              		.loc 1 458 3 is_stmt 1 view .LVU176
 459:Core/Src/app_sx126x.c **** }
 863              		.loc 1 459 3 view .LVU177
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 32


 460:Core/Src/app_sx126x.c **** 
 864              		.loc 1 460 1 is_stmt 0 view .LVU178
 865 0030 98B2     		uxth	r0, r3
 866              	.LVL85:
 460:Core/Src/app_sx126x.c **** 
 867              		.loc 1 460 1 view .LVU179
 868 0032 7047     		bx	lr
 869              		.cfi_endproc
 870              	.LFE141:
 872              		.section	.rodata.sx126x_tx_packet.str1.4,"aMS",%progbits,1
 873              		.align	2
 874              	.LC13:
 875 0000 74686520 		.ascii	"the buffer[%d] is 0x%02x\012\000"
 875      62756666 
 875      65725B25 
 875      645D2069 
 875      73203078 
 876 001a 0000     		.align	2
 877              	.LC14:
 878 001c 7472616E 		.ascii	"transmit finished\000"
 878      736D6974 
 878      2066696E 
 878      69736865 
 878      6400
 879 002e 0000     		.align	2
 880              	.LC15:
 881 0030 7472616E 		.ascii	"transmit timeout\000"
 881      736D6974 
 881      2074696D 
 881      656F7574 
 881      00
 882              		.section	.text.sx126x_tx_packet,"ax",%progbits
 883              		.align	1
 884              		.global	sx126x_tx_packet
 885              		.syntax unified
 886              		.thumb
 887              		.thumb_func
 888              		.fpu fpv4-sp-d16
 890              	sx126x_tx_packet:
 891              	.LVL86:
 892              	.LFB137:
 261:Core/Src/app_sx126x.c ****     uint16_t irqRegs;
 893              		.loc 1 261 1 is_stmt 1 view -0
 894              		.cfi_startproc
 895              		@ args = 0, pretend = 0, frame = 0
 896              		@ frame_needed = 0, uses_anonymous_args = 0
 261:Core/Src/app_sx126x.c ****     uint16_t irqRegs;
 897              		.loc 1 261 1 is_stmt 0 view .LVU181
 898 0000 70B5     		push	{r4, r5, r6, lr}
 899              	.LCFI15:
 900              		.cfi_def_cfa_offset 16
 901              		.cfi_offset 4, -16
 902              		.cfi_offset 5, -12
 903              		.cfi_offset 6, -8
 904              		.cfi_offset 14, -4
 262:Core/Src/app_sx126x.c ****     uint16_t crc;
 905              		.loc 1 262 5 is_stmt 1 view .LVU182
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 33


 263:Core/Src/app_sx126x.c ****     int i;
 906              		.loc 1 263 5 view .LVU183
 264:Core/Src/app_sx126x.c ****     // Buffer[0]=11^0xff;
 907              		.loc 1 264 5 view .LVU184
 266:Core/Src/app_sx126x.c ****     for ( i = 1; i <= 7; i++)
 908              		.loc 1 266 5 view .LVU185
 266:Core/Src/app_sx126x.c ****     for ( i = 1; i <= 7; i++)
 909              		.loc 1 266 14 is_stmt 0 view .LVU186
 910 0002 214B     		ldr	r3, .L61
 911 0004 0722     		movs	r2, #7
 912 0006 1A70     		strb	r2, [r3]
 267:Core/Src/app_sx126x.c ****     {
 913              		.loc 1 267 5 is_stmt 1 view .LVU187
 914              	.LVL87:
 267:Core/Src/app_sx126x.c ****     {
 915              		.loc 1 267 13 is_stmt 0 view .LVU188
 916 0008 0124     		movs	r4, #1
 917              	.LVL88:
 918              	.L53:
 267:Core/Src/app_sx126x.c ****     {
 919              		.loc 1 267 18 is_stmt 1 discriminator 1 view .LVU189
 267:Core/Src/app_sx126x.c ****     {
 920              		.loc 1 267 5 is_stmt 0 discriminator 1 view .LVU190
 921 000a 072C     		cmp	r4, #7
 922 000c 0BDC     		bgt	.L59
 269:Core/Src/app_sx126x.c ****         printf("the buffer[%d] is 0x%02x\n",i,Buffer[i]);
 923              		.loc 1 269 9 is_stmt 1 discriminator 3 view .LVU191
 269:Core/Src/app_sx126x.c ****         printf("the buffer[%d] is 0x%02x\n",i,Buffer[i]);
 924              		.loc 1 269 31 is_stmt 0 discriminator 3 view .LVU192
 925 000e 621E     		subs	r2, r4, #1
 269:Core/Src/app_sx126x.c ****         printf("the buffer[%d] is 0x%02x\n",i,Buffer[i]);
 926              		.loc 1 269 23 discriminator 3 view .LVU193
 927 0010 1201     		lsls	r2, r2, #4
 928 0012 1232     		adds	r2, r2, #18
 929 0014 D2B2     		uxtb	r2, r2
 269:Core/Src/app_sx126x.c ****         printf("the buffer[%d] is 0x%02x\n",i,Buffer[i]);
 930              		.loc 1 269 18 discriminator 3 view .LVU194
 931 0016 1C4B     		ldr	r3, .L61
 932 0018 1A55     		strb	r2, [r3, r4]
 270:Core/Src/app_sx126x.c ****     }
 933              		.loc 1 270 9 is_stmt 1 discriminator 3 view .LVU195
 934 001a 2146     		mov	r1, r4
 935 001c 1B48     		ldr	r0, .L61+4
 936 001e FFF7FEFF 		bl	printf
 937              	.LVL89:
 267:Core/Src/app_sx126x.c ****     {
 938              		.loc 1 267 26 discriminator 3 view .LVU196
 267:Core/Src/app_sx126x.c ****     {
 939              		.loc 1 267 27 is_stmt 0 discriminator 3 view .LVU197
 940 0022 0134     		adds	r4, r4, #1
 941              	.LVL90:
 267:Core/Src/app_sx126x.c ****     {
 942              		.loc 1 267 27 discriminator 3 view .LVU198
 943 0024 F1E7     		b	.L53
 944              	.L59:
 272:Core/Src/app_sx126x.c ****     Buffer[8]=crc>>8;
 945              		.loc 1 272 5 is_stmt 1 view .LVU199
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 34


 272:Core/Src/app_sx126x.c ****     Buffer[8]=crc>>8;
 946              		.loc 1 272 9 is_stmt 0 view .LVU200
 947 0026 184C     		ldr	r4, .L61
 948              	.LVL91:
 272:Core/Src/app_sx126x.c ****     Buffer[8]=crc>>8;
 949              		.loc 1 272 9 view .LVU201
 950 0028 0821     		movs	r1, #8
 951 002a 2046     		mov	r0, r4
 952 002c FFF7FEFF 		bl	crc16
 953              	.LVL92:
 273:Core/Src/app_sx126x.c ****     Buffer[9]=crc&0xff;
 954              		.loc 1 273 5 is_stmt 1 view .LVU202
 273:Core/Src/app_sx126x.c ****     Buffer[9]=crc&0xff;
 955              		.loc 1 273 14 is_stmt 0 view .LVU203
 956 0030 C0F30723 		ubfx	r3, r0, #8, #8
 957 0034 2372     		strb	r3, [r4, #8]
 274:Core/Src/app_sx126x.c ****     BufferSize=10;
 958              		.loc 1 274 5 is_stmt 1 view .LVU204
 274:Core/Src/app_sx126x.c ****     BufferSize=10;
 959              		.loc 1 274 14 is_stmt 0 view .LVU205
 960 0036 6072     		strb	r0, [r4, #9]
 275:Core/Src/app_sx126x.c ****     // for (i = 1; i <= 10; i++)
 961              		.loc 1 275 5 is_stmt 1 view .LVU206
 275:Core/Src/app_sx126x.c ****     // for (i = 1; i <= 10; i++)
 962              		.loc 1 275 15 is_stmt 0 view .LVU207
 963 0038 154D     		ldr	r5, .L61+8
 964 003a 0A23     		movs	r3, #10
 965 003c 2B80     		strh	r3, [r5]	@ movhi
 291:Core/Src/app_sx126x.c ****     
 966              		.loc 1 291 5 is_stmt 1 view .LVU208
 291:Core/Src/app_sx126x.c ****     
 967              		.loc 1 291 10 is_stmt 0 view .LVU209
 968 003e 154E     		ldr	r6, .L61+12
 969 0040 336B     		ldr	r3, [r6, #48]
 291:Core/Src/app_sx126x.c ****     
 970              		.loc 1 291 5 view .LVU210
 971 0042 9847     		blx	r3
 972              	.LVL93:
 293:Core/Src/app_sx126x.c ****     irqRegs=SX126xGetIrqStatus();
 973              		.loc 1 293 5 is_stmt 1 view .LVU211
 974 0044 0220     		movs	r0, #2
 975 0046 FFF7FEFF 		bl	DelayMs
 976              	.LVL94:
 294:Core/Src/app_sx126x.c ****     SX126xClearIrqStatus(irqRegs);
 977              		.loc 1 294 5 view .LVU212
 294:Core/Src/app_sx126x.c ****     SX126xClearIrqStatus(irqRegs);
 978              		.loc 1 294 13 is_stmt 0 view .LVU213
 979 004a FFF7FEFF 		bl	SX126xGetIrqStatus
 980              	.LVL95:
 295:Core/Src/app_sx126x.c ****     Radio.Send( Buffer, BufferSize );
 981              		.loc 1 295 5 is_stmt 1 view .LVU214
 982 004e FFF7FEFF 		bl	SX126xClearIrqStatus
 983              	.LVL96:
 296:Core/Src/app_sx126x.c ****     i=0;
 984              		.loc 1 296 5 view .LVU215
 296:Core/Src/app_sx126x.c ****     i=0;
 985              		.loc 1 296 10 is_stmt 0 view .LVU216
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 35


 986 0052 B36A     		ldr	r3, [r6, #40]
 296:Core/Src/app_sx126x.c ****     i=0;
 987              		.loc 1 296 5 view .LVU217
 988 0054 2978     		ldrb	r1, [r5]	@ zero_extendqisi2
 989 0056 2046     		mov	r0, r4
 990 0058 9847     		blx	r3
 991              	.LVL97:
 297:Core/Src/app_sx126x.c ****     while (1)
 992              		.loc 1 297 5 is_stmt 1 view .LVU218
 297:Core/Src/app_sx126x.c ****     while (1)
 993              		.loc 1 297 6 is_stmt 0 view .LVU219
 994 005a 0024     		movs	r4, #0
 995              	.LVL98:
 996              	.L57:
 298:Core/Src/app_sx126x.c ****     {
 997              		.loc 1 298 5 is_stmt 1 view .LVU220
 300:Core/Src/app_sx126x.c ****         // printf("the Irq status is 0x%04x\n",irqRegs);
 998              		.loc 1 300 9 view .LVU221
 300:Core/Src/app_sx126x.c ****         // printf("the Irq status is 0x%04x\n",irqRegs);
 999              		.loc 1 300 17 is_stmt 0 view .LVU222
 1000 005c FFF7FEFF 		bl	SX126xGetIrqStatus
 1001              	.LVL99:
 302:Core/Src/app_sx126x.c ****         {
 1002              		.loc 1 302 9 is_stmt 1 view .LVU223
 302:Core/Src/app_sx126x.c ****         {
 1003              		.loc 1 302 11 is_stmt 0 view .LVU224
 1004 0060 10F0010F 		tst	r0, #1
 1005 0064 09D1     		bne	.L60
 311:Core/Src/app_sx126x.c ****             HAL_Delay(10);
 1006              		.loc 1 311 13 is_stmt 1 view .LVU225
 311:Core/Src/app_sx126x.c ****             HAL_Delay(10);
 1007              		.loc 1 311 14 is_stmt 0 view .LVU226
 1008 0066 0134     		adds	r4, r4, #1
 1009              	.LVL100:
 312:Core/Src/app_sx126x.c ****             if(i>=200)
 1010              		.loc 1 312 13 is_stmt 1 view .LVU227
 1011 0068 0A20     		movs	r0, #10
 1012              	.LVL101:
 312:Core/Src/app_sx126x.c ****             if(i>=200)
 1013              		.loc 1 312 13 is_stmt 0 view .LVU228
 1014 006a FFF7FEFF 		bl	HAL_Delay
 1015              	.LVL102:
 313:Core/Src/app_sx126x.c ****             {
 1016              		.loc 1 313 13 is_stmt 1 view .LVU229
 313:Core/Src/app_sx126x.c ****             {
 1017              		.loc 1 313 15 is_stmt 0 view .LVU230
 1018 006e C72C     		cmp	r4, #199
 1019 0070 F4DD     		ble	.L57
 315:Core/Src/app_sx126x.c ****                 break;
 1020              		.loc 1 315 17 is_stmt 1 view .LVU231
 1021 0072 0948     		ldr	r0, .L61+16
 1022 0074 FFF7FEFF 		bl	puts
 1023              	.LVL103:
 316:Core/Src/app_sx126x.c ****             }
 1024              		.loc 1 316 17 view .LVU232
 322:Core/Src/app_sx126x.c **** /**
 1025              		.loc 1 322 1 is_stmt 0 view .LVU233
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 36


 1026 0078 05E0     		b	.L52
 1027              	.LVL104:
 1028              	.L60:
 304:Core/Src/app_sx126x.c ****             GpioToggle(&Led1);
 1029              		.loc 1 304 13 is_stmt 1 view .LVU234
 1030 007a 0848     		ldr	r0, .L61+20
 1031              	.LVL105:
 304:Core/Src/app_sx126x.c ****             GpioToggle(&Led1);
 1032              		.loc 1 304 13 is_stmt 0 view .LVU235
 1033 007c FFF7FEFF 		bl	puts
 1034              	.LVL106:
 305:Core/Src/app_sx126x.c ****             break;
 1035              		.loc 1 305 13 is_stmt 1 view .LVU236
 1036 0080 0748     		ldr	r0, .L61+24
 1037 0082 FFF7FEFF 		bl	GpioToggle
 1038              	.LVL107:
 306:Core/Src/app_sx126x.c ****         }
 1039              		.loc 1 306 13 view .LVU237
 1040              	.L52:
 322:Core/Src/app_sx126x.c **** /**
 1041              		.loc 1 322 1 is_stmt 0 view .LVU238
 1042 0086 70BD     		pop	{r4, r5, r6, pc}
 1043              	.LVL108:
 1044              	.L62:
 322:Core/Src/app_sx126x.c **** /**
 1045              		.loc 1 322 1 view .LVU239
 1046              		.align	2
 1047              	.L61:
 1048 0088 00000000 		.word	.LANCHOR3
 1049 008c 00000000 		.word	.LC13
 1050 0090 00000000 		.word	.LANCHOR4
 1051 0094 00000000 		.word	Radio
 1052 0098 30000000 		.word	.LC15
 1053 009c 1C000000 		.word	.LC14
 1054 00a0 00000000 		.word	Led1
 1055              		.cfi_endproc
 1056              	.LFE137:
 1058              		.section	.text.main1,"ax",%progbits
 1059              		.align	1
 1060              		.global	main1
 1061              		.syntax unified
 1062              		.thumb
 1063              		.thumb_func
 1064              		.fpu fpv4-sp-d16
 1066              	main1:
 1067              	.LFB142:
 467:Core/Src/app_sx126x.c ****     bool isMaster = true;
 1068              		.loc 1 467 1 is_stmt 1 view -0
 1069              		.cfi_startproc
 1070              		@ args = 0, pretend = 0, frame = 0
 1071              		@ frame_needed = 0, uses_anonymous_args = 0
 1072 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 1073              	.LCFI16:
 1074              		.cfi_def_cfa_offset 28
 1075              		.cfi_offset 4, -28
 1076              		.cfi_offset 5, -24
 1077              		.cfi_offset 6, -20
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 37


 1078              		.cfi_offset 7, -16
 1079              		.cfi_offset 8, -12
 1080              		.cfi_offset 9, -8
 1081              		.cfi_offset 14, -4
 1082 0004 8BB0     		sub	sp, sp, #44
 1083              	.LCFI17:
 1084              		.cfi_def_cfa_offset 72
 468:Core/Src/app_sx126x.c ****     uint8_t i;
 1085              		.loc 1 468 5 view .LVU241
 1086              	.LVL109:
 469:Core/Src/app_sx126x.c **** 
 1087              		.loc 1 469 5 view .LVU242
 472:Core/Src/app_sx126x.c ****     BoardInitPeriph( );
 1088              		.loc 1 472 5 view .LVU243
 1089 0006 FFF7FEFF 		bl	BoardInitMcu
 1090              	.LVL110:
 473:Core/Src/app_sx126x.c **** 	
 1091              		.loc 1 473 5 view .LVU244
 1092 000a FFF7FEFF 		bl	BoardInitPeriph
 1093              	.LVL111:
 476:Core/Src/app_sx126x.c **** 		TimerSetValue(&fsk_tst_timer,20);
 1094              		.loc 1 476 4 view .LVU245
 1095 000e 2A4C     		ldr	r4, .L66
 1096 0010 2A49     		ldr	r1, .L66+4
 1097 0012 2046     		mov	r0, r4
 1098 0014 FFF7FEFF 		bl	TimerInit
 1099              	.LVL112:
 477:Core/Src/app_sx126x.c **** 
 1100              		.loc 1 477 3 view .LVU246
 1101 0018 1421     		movs	r1, #20
 1102 001a 2046     		mov	r0, r4
 1103 001c FFF7FEFF 		bl	TimerSetValue
 1104              	.LVL113:
 480:Core/Src/app_sx126x.c ****     RadioEvents.RxDone = OnRxDone;
 1105              		.loc 1 480 5 view .LVU247
 480:Core/Src/app_sx126x.c ****     RadioEvents.RxDone = OnRxDone;
 1106              		.loc 1 480 24 is_stmt 0 view .LVU248
 1107 0020 2748     		ldr	r0, .L66+8
 1108 0022 284B     		ldr	r3, .L66+12
 1109 0024 0360     		str	r3, [r0]
 481:Core/Src/app_sx126x.c ****     RadioEvents.TxTimeout = OnTxTimeout;
 1110              		.loc 1 481 5 is_stmt 1 view .LVU249
 481:Core/Src/app_sx126x.c ****     RadioEvents.TxTimeout = OnTxTimeout;
 1111              		.loc 1 481 24 is_stmt 0 view .LVU250
 1112 0026 284B     		ldr	r3, .L66+16
 1113 0028 8360     		str	r3, [r0, #8]
 482:Core/Src/app_sx126x.c ****     RadioEvents.RxTimeout = OnRxTimeout;
 1114              		.loc 1 482 5 is_stmt 1 view .LVU251
 482:Core/Src/app_sx126x.c ****     RadioEvents.RxTimeout = OnRxTimeout;
 1115              		.loc 1 482 27 is_stmt 0 view .LVU252
 1116 002a 284B     		ldr	r3, .L66+20
 1117 002c 4360     		str	r3, [r0, #4]
 483:Core/Src/app_sx126x.c ****     RadioEvents.RxError = OnRxError;
 1118              		.loc 1 483 5 is_stmt 1 view .LVU253
 483:Core/Src/app_sx126x.c ****     RadioEvents.RxError = OnRxError;
 1119              		.loc 1 483 27 is_stmt 0 view .LVU254
 1120 002e 284B     		ldr	r3, .L66+24
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 38


 1121 0030 C360     		str	r3, [r0, #12]
 484:Core/Src/app_sx126x.c **** 
 1122              		.loc 1 484 5 is_stmt 1 view .LVU255
 484:Core/Src/app_sx126x.c **** 
 1123              		.loc 1 484 25 is_stmt 0 view .LVU256
 1124 0032 284B     		ldr	r3, .L66+28
 1125 0034 0361     		str	r3, [r0, #16]
 486:Core/Src/app_sx126x.c **** 
 1126              		.loc 1 486 5 is_stmt 1 view .LVU257
 486:Core/Src/app_sx126x.c **** 
 1127              		.loc 1 486 10 is_stmt 0 view .LVU258
 1128 0036 284D     		ldr	r5, .L66+32
 1129 0038 2B68     		ldr	r3, [r5]
 486:Core/Src/app_sx126x.c **** 
 1130              		.loc 1 486 5 view .LVU259
 1131 003a 9847     		blx	r3
 1132              	.LVL114:
 488:Core/Src/app_sx126x.c **** 
 1133              		.loc 1 488 5 is_stmt 1 view .LVU260
 488:Core/Src/app_sx126x.c **** 
 1134              		.loc 1 488 10 is_stmt 0 view .LVU261
 1135 003c EB68     		ldr	r3, [r5, #12]
 488:Core/Src/app_sx126x.c **** 
 1136              		.loc 1 488 5 view .LVU262
 1137 003e 2748     		ldr	r0, .L66+36
 1138 0040 9847     		blx	r3
 1139              	.LVL115:
 504:Core/Src/app_sx126x.c ****                                   FSK_DATARATE, 0,
 1140              		.loc 1 504 5 is_stmt 1 view .LVU263
 1141 0042 40F6B833 		movw	r3, #3000
 1142 0046 0893     		str	r3, [sp, #32]
 1143 0048 0024     		movs	r4, #0
 1144 004a 0794     		str	r4, [sp, #28]
 1145 004c 0694     		str	r4, [sp, #24]
 1146 004e 0594     		str	r4, [sp, #20]
 1147 0050 0126     		movs	r6, #1
 1148 0052 0496     		str	r6, [sp, #16]
 1149 0054 0396     		str	r6, [sp, #12]
 1150 0056 4FF00208 		mov	r8, #2
 1151 005a CDF80880 		str	r8, [sp, #8]
 1152 005e 0194     		str	r4, [sp, #4]
 1153 0060 4FF41669 		mov	r9, #2400
 1154 0064 CDF80090 		str	r9, [sp]
 1155 0068 2346     		mov	r3, r4
 1156 006a 44F62062 		movw	r2, #20000
 1157 006e 0E21     		movs	r1, #14
 1158 0070 2046     		mov	r0, r4
 1159 0072 EF69     		ldr	r7, [r5, #28]
 1160 0074 B847     		blx	r7
 1161              	.LVL116:
 510:Core/Src/app_sx126x.c ****                                   0, FSK_AFC_BANDWIDTH, FSK_PREAMBLE_LENGTH,
 1162              		.loc 1 510 5 view .LVU264
 1163 0076 0996     		str	r6, [sp, #36]
 1164 0078 0894     		str	r4, [sp, #32]
 1165 007a 0794     		str	r4, [sp, #28]
 1166 007c 0694     		str	r4, [sp, #24]
 1167 007e 0594     		str	r4, [sp, #20]
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 39


 1168 0080 0A23     		movs	r3, #10
 1169 0082 0493     		str	r3, [sp, #16]
 1170 0084 0396     		str	r6, [sp, #12]
 1171 0086 0294     		str	r4, [sp, #8]
 1172 0088 CDF80480 		str	r8, [sp, #4]
 1173 008c 144B     		ldr	r3, .L66+40
 1174 008e 0093     		str	r3, [sp]
 1175 0090 2346     		mov	r3, r4
 1176 0092 4A46     		mov	r2, r9
 1177 0094 4CF25031 		movw	r1, #50000
 1178 0098 2046     		mov	r0, r4
 1179 009a AE69     		ldr	r6, [r5, #24]
 1180 009c B047     		blx	r6
 1181              	.LVL117:
 514:Core/Src/app_sx126x.c **** 		//fsk_state = FSK_TEST_START;
 1182              		.loc 1 514 3 view .LVU265
 514:Core/Src/app_sx126x.c **** 		//fsk_state = FSK_TEST_START;
 1183              		.loc 1 514 8 is_stmt 0 view .LVU266
 1184 009e 6B6E     		ldr	r3, [r5, #100]
 514:Core/Src/app_sx126x.c **** 		//fsk_state = FSK_TEST_START;
 1185              		.loc 1 514 3 view .LVU267
 1186 00a0 2046     		mov	r0, r4
 1187 00a2 9847     		blx	r3
 1188              	.LVL118:
 517:Core/Src/app_sx126x.c **** 
 1189              		.loc 1 517 5 is_stmt 1 view .LVU268
 1190 00a4 FFF7FEFF 		bl	GenTriggerPulse
 1191              	.LVL119:
 547:Core/Src/app_sx126x.c **** 		while(1)
 1192              		.loc 1 547 3 view .LVU269
 1193 00a8 0E48     		ldr	r0, .L66+44
 1194 00aa FFF7FEFF 		bl	puts
 1195              	.LVL120:
 1196              	.L64:
 548:Core/Src/app_sx126x.c **** 		{
 1197              		.loc 1 548 3 discriminator 1 view .LVU270
 551:Core/Src/app_sx126x.c **** 		}
 1198              		.loc 1 551 4 discriminator 1 view .LVU271
 551:Core/Src/app_sx126x.c **** 		}
 1199              		.loc 1 551 9 is_stmt 0 discriminator 1 view .LVU272
 1200 00ae 0A4B     		ldr	r3, .L66+32
 1201 00b0 1B6E     		ldr	r3, [r3, #96]
 551:Core/Src/app_sx126x.c **** 		}
 1202              		.loc 1 551 4 discriminator 1 view .LVU273
 1203 00b2 9847     		blx	r3
 1204              	.LVL121:
 548:Core/Src/app_sx126x.c **** 		{
 1205              		.loc 1 548 8 is_stmt 1 discriminator 1 view .LVU274
 1206 00b4 FBE7     		b	.L64
 1207              	.L67:
 1208 00b6 00BF     		.align	2
 1209              	.L66:
 1210 00b8 00000000 		.word	.LANCHOR1
 1211 00bc 00000000 		.word	GenTriggerPulse
 1212 00c0 00000000 		.word	.LANCHOR2
 1213 00c4 00000000 		.word	OnTxDone
 1214 00c8 00000000 		.word	OnRxDone
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 40


 1215 00cc 00000000 		.word	OnTxTimeout
 1216 00d0 00000000 		.word	OnRxTimeout
 1217 00d4 00000000 		.word	OnRxError
 1218 00d8 00000000 		.word	Radio
 1219 00dc C0780233 		.word	855800000
 1220 00e0 85450100 		.word	83333
 1221 00e4 00000000 		.word	.LC2
 1222              		.cfi_endproc
 1223              	.LFE142:
 1225              		.section	.rodata.DUMP.str1.4,"aMS",%progbits,1
 1226              		.align	2
 1227              	.LC16:
 1228 0000 7061796C 		.ascii	"payload recieved\000"
 1228      6F616420 
 1228      72656369 
 1228      65766564 
 1228      00
 1229 0011 000000   		.align	2
 1230              	.LC17:
 1231 0014 25303278 		.ascii	"%02x \000"
 1231      2000
 1232              		.section	.text.DUMP,"ax",%progbits
 1233              		.align	1
 1234              		.global	DUMP
 1235              		.syntax unified
 1236              		.thumb
 1237              		.thumb_func
 1238              		.fpu fpv4-sp-d16
 1240              	DUMP:
 1241              	.LVL122:
 1242              	.LFB144:
 679:Core/Src/app_sx126x.c **** 	printf("payload recieved\n");
 1243              		.loc 1 679 1 view -0
 1244              		.cfi_startproc
 1245              		@ args = 0, pretend = 0, frame = 0
 1246              		@ frame_needed = 0, uses_anonymous_args = 0
 679:Core/Src/app_sx126x.c **** 	printf("payload recieved\n");
 1247              		.loc 1 679 1 is_stmt 0 view .LVU276
 1248 0000 70B5     		push	{r4, r5, r6, lr}
 1249              	.LCFI18:
 1250              		.cfi_def_cfa_offset 16
 1251              		.cfi_offset 4, -16
 1252              		.cfi_offset 5, -12
 1253              		.cfi_offset 6, -8
 1254              		.cfi_offset 14, -4
 1255 0002 0446     		mov	r4, r0
 1256 0004 0E46     		mov	r6, r1
 680:Core/Src/app_sx126x.c **** 	uint16_t i = 0;
 1257              		.loc 1 680 2 is_stmt 1 view .LVU277
 1258 0006 0948     		ldr	r0, .L72
 1259              	.LVL123:
 680:Core/Src/app_sx126x.c **** 	uint16_t i = 0;
 1260              		.loc 1 680 2 is_stmt 0 view .LVU278
 1261 0008 FFF7FEFF 		bl	puts
 1262              	.LVL124:
 681:Core/Src/app_sx126x.c **** 	for(i = 0; i< len; i++)
 1263              		.loc 1 681 2 is_stmt 1 view .LVU279
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 41


 682:Core/Src/app_sx126x.c **** 		printf("%02x ",*payload++);
 1264              		.loc 1 682 2 view .LVU280
 682:Core/Src/app_sx126x.c **** 		printf("%02x ",*payload++);
 1265              		.loc 1 682 8 is_stmt 0 view .LVU281
 1266 000c 0025     		movs	r5, #0
 682:Core/Src/app_sx126x.c **** 		printf("%02x ",*payload++);
 1267              		.loc 1 682 2 view .LVU282
 1268 000e 06E0     		b	.L69
 1269              	.LVL125:
 1270              	.L70:
 683:Core/Src/app_sx126x.c **** 	printf("\n");
 1271              		.loc 1 683 3 is_stmt 1 discriminator 3 view .LVU283
 683:Core/Src/app_sx126x.c **** 	printf("\n");
 1272              		.loc 1 683 3 is_stmt 0 discriminator 3 view .LVU284
 1273 0010 14F8011B 		ldrb	r1, [r4], #1	@ zero_extendqisi2
 1274              	.LVL126:
 683:Core/Src/app_sx126x.c **** 	printf("\n");
 1275              		.loc 1 683 3 discriminator 3 view .LVU285
 1276 0014 0648     		ldr	r0, .L72+4
 1277 0016 FFF7FEFF 		bl	printf
 1278              	.LVL127:
 682:Core/Src/app_sx126x.c **** 		printf("%02x ",*payload++);
 1279              		.loc 1 682 21 is_stmt 1 discriminator 3 view .LVU286
 682:Core/Src/app_sx126x.c **** 		printf("%02x ",*payload++);
 1280              		.loc 1 682 22 is_stmt 0 discriminator 3 view .LVU287
 1281 001a 0135     		adds	r5, r5, #1
 1282              	.LVL128:
 682:Core/Src/app_sx126x.c **** 		printf("%02x ",*payload++);
 1283              		.loc 1 682 22 discriminator 3 view .LVU288
 1284 001c ADB2     		uxth	r5, r5
 1285              	.LVL129:
 1286              	.L69:
 682:Core/Src/app_sx126x.c **** 		printf("%02x ",*payload++);
 1287              		.loc 1 682 13 is_stmt 1 discriminator 1 view .LVU289
 682:Core/Src/app_sx126x.c **** 		printf("%02x ",*payload++);
 1288              		.loc 1 682 2 is_stmt 0 discriminator 1 view .LVU290
 1289 001e B542     		cmp	r5, r6
 1290 0020 F6D3     		bcc	.L70
 684:Core/Src/app_sx126x.c **** }
 1291              		.loc 1 684 2 is_stmt 1 view .LVU291
 1292 0022 0A20     		movs	r0, #10
 1293 0024 FFF7FEFF 		bl	putchar
 1294              	.LVL130:
 685:Core/Src/app_sx126x.c **** 
 1295              		.loc 1 685 1 is_stmt 0 view .LVU292
 1296 0028 70BD     		pop	{r4, r5, r6, pc}
 1297              	.LVL131:
 1298              	.L73:
 685:Core/Src/app_sx126x.c **** 
 1299              		.loc 1 685 1 view .LVU293
 1300 002a 00BF     		.align	2
 1301              	.L72:
 1302 002c 00000000 		.word	.LC16
 1303 0030 14000000 		.word	.LC17
 1304              		.cfi_endproc
 1305              	.LFE144:
 1307              		.section	.rodata.OnRxDone.str1.4,"aMS",%progbits,1
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 42


 1308              		.align	2
 1309              	.LC18:
 1310 0000 52582064 		.ascii	"RX done\015\000"
 1310      6F6E650D 
 1310      00
 1311              		.section	.text.OnRxDone,"ax",%progbits
 1312              		.align	1
 1313              		.global	OnRxDone
 1314              		.syntax unified
 1315              		.thumb
 1316              		.thumb_func
 1317              		.fpu fpv4-sp-d16
 1319              	OnRxDone:
 1320              	.LVL132:
 1321              	.LFB145:
 688:Core/Src/app_sx126x.c **** #if 0
 1322              		.loc 1 688 1 is_stmt 1 view -0
 1323              		.cfi_startproc
 1324              		@ args = 0, pretend = 0, frame = 0
 1325              		@ frame_needed = 0, uses_anonymous_args = 0
 688:Core/Src/app_sx126x.c **** #if 0
 1326              		.loc 1 688 1 is_stmt 0 view .LVU295
 1327 0000 38B5     		push	{r3, r4, r5, lr}
 1328              	.LCFI19:
 1329              		.cfi_def_cfa_offset 16
 1330              		.cfi_offset 3, -16
 1331              		.cfi_offset 4, -12
 1332              		.cfi_offset 5, -8
 1333              		.cfi_offset 14, -4
 1334 0002 0446     		mov	r4, r0
 1335 0004 0D46     		mov	r5, r1
 697:Core/Src/app_sx126x.c ****     DUMP(payload, size);
 1336              		.loc 1 697 3 is_stmt 1 view .LVU296
 1337 0006 0748     		ldr	r0, .L76
 1338              	.LVL133:
 697:Core/Src/app_sx126x.c ****     DUMP(payload, size);
 1339              		.loc 1 697 3 is_stmt 0 view .LVU297
 1340 0008 FFF7FEFF 		bl	puts
 1341              	.LVL134:
 698:Core/Src/app_sx126x.c **** 	  //pkt_rx_num++;
 1342              		.loc 1 698 5 is_stmt 1 view .LVU298
 1343 000c 2946     		mov	r1, r5
 1344 000e 2046     		mov	r0, r4
 1345 0010 FFF7FEFF 		bl	DUMP
 1346              	.LVL135:
 701:Core/Src/app_sx126x.c **** 	  Radio.Rx(0);
 1347              		.loc 1 701 3 view .LVU299
 701:Core/Src/app_sx126x.c **** 	  Radio.Rx(0);
 1348              		.loc 1 701 9 is_stmt 0 view .LVU300
 1349 0014 044B     		ldr	r3, .L76+4
 1350 0016 0122     		movs	r2, #1
 1351 0018 1A70     		strb	r2, [r3]
 702:Core/Src/app_sx126x.c **** }
 1352              		.loc 1 702 4 is_stmt 1 view .LVU301
 702:Core/Src/app_sx126x.c **** }
 1353              		.loc 1 702 9 is_stmt 0 view .LVU302
 1354 001a 044B     		ldr	r3, .L76+8
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 43


 1355 001c 5B6B     		ldr	r3, [r3, #52]
 702:Core/Src/app_sx126x.c **** }
 1356              		.loc 1 702 4 view .LVU303
 1357 001e 0020     		movs	r0, #0
 1358 0020 9847     		blx	r3
 1359              	.LVL136:
 703:Core/Src/app_sx126x.c **** 
 1360              		.loc 1 703 1 view .LVU304
 1361 0022 38BD     		pop	{r3, r4, r5, pc}
 1362              	.LVL137:
 1363              	.L77:
 703:Core/Src/app_sx126x.c **** 
 1364              		.loc 1 703 1 view .LVU305
 1365              		.align	2
 1366              	.L76:
 1367 0024 00000000 		.word	.LC18
 1368 0028 00000000 		.word	.LANCHOR0
 1369 002c 00000000 		.word	Radio
 1370              		.cfi_endproc
 1371              	.LFE145:
 1373              		.global	fsk_tst_timer
 1374              		.global	SnrValue
 1375              		.global	RssiValue
 1376              		.global	State
 1377              		.global	xorbuf
 1378              		.global	Buffer
 1379              		.global	BufferSize
 1380              		.global	PongMsg
 1381              		.global	PingMsg
 1382              		.section	.bss.Buffer,"aw",%nobits
 1383              		.align	2
 1384              		.set	.LANCHOR3,. + 0
 1387              	Buffer:
 1388 0000 00000000 		.space	64
 1388      00000000 
 1388      00000000 
 1388      00000000 
 1388      00000000 
 1389              		.section	.bss.RadioEvents,"aw",%nobits
 1390              		.align	2
 1391              		.set	.LANCHOR2,. + 0
 1394              	RadioEvents:
 1395 0000 00000000 		.space	28
 1395      00000000 
 1395      00000000 
 1395      00000000 
 1395      00000000 
 1396              		.section	.bss.RssiValue,"aw",%nobits
 1399              	RssiValue:
 1400 0000 00       		.space	1
 1401              		.section	.bss.SnrValue,"aw",%nobits
 1404              	SnrValue:
 1405 0000 00       		.space	1
 1406              		.section	.bss.State,"aw",%nobits
 1407              		.set	.LANCHOR0,. + 0
 1410              	State:
 1411 0000 00       		.space	1
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 44


 1412              		.section	.bss.fsk_state,"aw",%nobits
 1415              	fsk_state:
 1416 0000 00       		.space	1
 1417              		.section	.bss.fsk_tst_timer,"aw",%nobits
 1418              		.align	2
 1419              		.set	.LANCHOR1,. + 0
 1422              	fsk_tst_timer:
 1423 0000 00000000 		.space	20
 1423      00000000 
 1423      00000000 
 1423      00000000 
 1423      00000000 
 1424              		.section	.bss.pkt_rx_num,"aw",%nobits
 1425              		.align	2
 1428              	pkt_rx_num:
 1429 0000 00000000 		.space	4
 1430              		.section	.bss.pkt_send,"aw",%nobits
 1431              		.align	2
 1434              	pkt_send:
 1435 0000 00000000 		.space	4
 1436              		.section	.data.BufferSize,"aw"
 1437              		.align	1
 1438              		.set	.LANCHOR4,. + 0
 1441              	BufferSize:
 1442 0000 4000     		.short	64
 1443              		.section	.data.xorbuf,"aw"
 1444              		.align	2
 1447              	xorbuf:
 1448 0000 FFE11D9A 		.ascii	"\377\341\035\232\355\2053$\352z\3229p\227W\012T}-\330"
 1448      ED853324 
 1448      EA7AD239 
 1448      7097570A 
 1448      547D2DD8 
 1449 0014 6D0DBA8F 		.ascii	"m\015\272\217gY\307\242\2774\312\0300S\223\337\222\354"
 1449      6759C7A2 
 1449      BF34CA18 
 1449      305393DF 
 1449      92EC
 1450 0026 A7158ADC 		.ascii	"\247\025\212\334\364\206UN\030!@\304\304\325\306\221"
 1450      F486554E 
 1450      182140C4 
 1450      C4D5C691 
 1451 0036 8ACDE7   		.ascii	"\212\315\347"
 1452              		.section	.rodata.PingMsg,"a"
 1453              		.align	2
 1456              	PingMsg:
 1457 0000 50494E47 		.ascii	"PING\000"
 1457      00
 1458              		.section	.rodata.PongMsg,"a"
 1459              		.align	2
 1462              	PongMsg:
 1463 0000 504F4E47 		.ascii	"PONG\000"
 1463      00
 1464              		.text
 1465              	.Letext0:
 1466              		.file 2 "c:\\gnu arm embedded toolchain\\10 2020-q4-major\\arm-none-eabi\\include\\machine\\_defau
 1467              		.file 3 "c:\\gnu arm embedded toolchain\\10 2020-q4-major\\arm-none-eabi\\include\\sys\\_stdint.h"
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 45


 1468              		.file 4 "Core/Src/system/timer.h"
 1469              		.file 5 "Core/Src/system/gpio.h"
 1470              		.file 6 "Core/Src/radio/radio.h"
 1471              		.file 7 "Core/Src/radio/sx126x/sx126x.h"
 1472              		.file 8 "Core/Src/boards/NucleoL476/board.h"
 1473              		.file 9 "<built-in>"
 1474              		.file 10 "c:\\gnu arm embedded toolchain\\10 2020-q4-major\\arm-none-eabi\\include\\stdio.h"
 1475              		.file 11 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
 1476              		.file 12 "Core/Src/boards/NucleoL476/sx126x-board.h"
 1477              		.file 13 "Core/Src/system/delay.h"
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 46


DEFINED SYMBOLS
                            *ABS*:00000000 app_sx126x.c
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:18     .text.OnTxDone:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:26     .text.OnTxDone:00000000 OnTxDone
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:55     .text.OnTxDone:00000010 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:61     .text.OnTxTimeout:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:68     .text.OnTxTimeout:00000000 OnTxTimeout
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:96     .text.OnTxTimeout:00000010 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:102    .text.GenTriggerPulse:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:109    .text.GenTriggerPulse:00000000 GenTriggerPulse
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:149    .text.GenTriggerPulse:0000002c $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:154    .rodata.OnRxTimeout.str1.4:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:158    .text.OnRxTimeout:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:165    .text.OnRxTimeout:00000000 OnRxTimeout
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:193    .text.OnRxTimeout:00000014 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:199    .rodata.OnRxError.str1.4:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:203    .text.OnRxError:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:210    .text.OnRxError:00000000 OnRxError
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:238    .text.OnRxError:00000014 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:244    .text.sx126x_init:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:251    .text.sx126x_init:00000000 sx126x_init
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:386    .text.sx126x_init:000000b0 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1319   .text.OnRxDone:00000000 OnRxDone
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:401    .rodata.sx126x_rx_packet.str1.4:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:405    .text.sx126x_rx_packet:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:412    .text.sx126x_rx_packet:00000000 sx126x_rx_packet
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:442    .text.sx126x_rx_packet:00000010 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:448    .rodata.register_test.str1.4:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:464    .text.register_test:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:471    .text.register_test:00000000 register_test
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:591    .text.register_test:00000098 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:600    .rodata.packet_rx.str1.4:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:616    .text.packet_rx:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:623    .text.packet_rx:00000000 packet_rx
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:774    .text.packet_rx:00000098 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:785    .text.crc16:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:792    .text.crc16:00000000 crc16
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:873    .rodata.sx126x_tx_packet.str1.4:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:883    .text.sx126x_tx_packet:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:890    .text.sx126x_tx_packet:00000000 sx126x_tx_packet
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1048   .text.sx126x_tx_packet:00000088 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1059   .text.main1:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1066   .text.main1:00000000 main1
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1210   .text.main1:000000b8 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1226   .rodata.DUMP.str1.4:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1233   .text.DUMP:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1240   .text.DUMP:00000000 DUMP
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1302   .text.DUMP:0000002c $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1308   .rodata.OnRxDone.str1.4:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1312   .text.OnRxDone:00000000 $t
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1367   .text.OnRxDone:00000024 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1422   .bss.fsk_tst_timer:00000000 fsk_tst_timer
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1404   .bss.SnrValue:00000000 SnrValue
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1399   .bss.RssiValue:00000000 RssiValue
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1410   .bss.State:00000000 State
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1447   .data.xorbuf:00000000 xorbuf
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1387   .bss.Buffer:00000000 Buffer
ARM GAS  C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s 			page 47


C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1441   .data.BufferSize:00000000 BufferSize
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1462   .rodata.PongMsg:00000000 PongMsg
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1456   .rodata.PingMsg:00000000 PingMsg
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1383   .bss.Buffer:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1390   .bss.RadioEvents:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1394   .bss.RadioEvents:00000000 RadioEvents
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1400   .bss.RssiValue:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1405   .bss.SnrValue:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1411   .bss.State:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1415   .bss.fsk_state:00000000 fsk_state
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1416   .bss.fsk_state:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1418   .bss.fsk_tst_timer:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1425   .bss.pkt_rx_num:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1428   .bss.pkt_rx_num:00000000 pkt_rx_num
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1431   .bss.pkt_send:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1434   .bss.pkt_send:00000000 pkt_send
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1437   .data.BufferSize:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1444   .data.xorbuf:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1453   .rodata.PingMsg:00000000 $d
C:\Users\andywei\AppData\Local\Temp\ccdTjwe2.s:1459   .rodata.PongMsg:00000000 $d

UNDEFINED SYMBOLS
Radio
GpioWrite
DelayMs
Led2
puts
BoardInitMcu
BoardInitPeriph
TimerInit
TimerSetValue
SX126xWriteRegister
SX126xReadRegister
sprintf
printf
SX126xGetIrqStatus
SX126xClearIrqStatus
HAL_Delay
GpioToggle
SX126xGetPayload
putchar
SX126xGetPacketStatus
Led1
